
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="mq_unlink()" /><meta name="abstract" content="Remove a queue" /><meta name="description" content="Remove a queue" /><meta name="indexterms" content="mq_unlink()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.sys_arch/topic/ipc_Message_queues.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.technotes/topic/managing_mq_mqueue.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mq_close.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mq_open.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/u/unlink.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.utilities/topic/m/mq.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.utilities/topic/m/mqueue.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="mq_unlink" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>mq_unlink()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="mq_unlink">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M">M</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">mq_unlink()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Remove a queue</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;mqueue.h&gt;

int mq_unlink( const char* <var class="keyword varname">name</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">name</var></dt>

<dd class="dd">The name of the message queue that you want to unlink.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<ul class="ul">
<li class="li">For the traditional implementation, <span class="ph filepath">libc</span>:

  <p class="p">
  Use the <span class="keyword option">-l c</span> option to
  <a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
  to link against this library.
  This library is usually included automatically.
  </p>

</li>


<li class="li">For the alternate implementation that uses the <a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/m/mq.html"><span class="keyword cmdname">mq</span></a> server and
a queue in kernel space, <span class="ph filepath">libmq</span>: <p class="p"> Use the <span class="keyword option">-l mq</span> option to
<span class="keyword cmdname">qcc</span> to link against this library. </p>

</li>


</ul>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">


The <span class="keyword apiname">mq_unlink()</span> function removes the queue with the given <var class="keyword varname">name</var>.
</p>


<div class="note note"><span class="notetitle">Note:</span>  The message queue manager needs to be running. <span class="keyword">QNX Neutrino</span> supports two
implementations of message queues: a traditional implementation, and an alternate one that uses the
<span class="keyword cmdname">mq</span> server and a queue in kernel space. For more information, see the entries for
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/m/mq.html"><span class="keyword cmdname">mq</span></a> and <a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/m/mqueue.html"><span class="keyword cmdname">mqueue</span></a>
in the <cite class="cite">Utilities Reference</cite>, as well as the
<a class="xref" href="../../../com.qnx.doc.neutrino.technotes/topic/managing_mq_mqueue.html">POSIX Message Queues: Two Implementations</a>
technote. </div>


<p class="p">
If some process has the queue open when the call to
<span class="keyword apiname">mq_unlink()</span> is made, then the actual deletion of the queue
is postponed until it has been closed.  If a queue exists in the
netherworld between unlinking and the actual removal of the queue,
then <em class="ph i">all</em> calls to open a queue with the given name fail (even if
<span class="keyword const">O_CREAT</span> is present in <var class="keyword varname">oflag</var>).  Once the
queue is deleted, all elements currently on it are freed.  Due to
the lazy deletion of queues, it's impossible for any process to be
blocked on the message queue when it's deleted.
</p>


<p class="p">
Calling
<a class="xref" href="../u/unlink.html" title="Remove a link to a file"><span class="keyword apiname">unlink()</span></a>
with a name that resolves to the message queue server's namespace (e.g.,
<span class="ph filepath">/dev/mqueue/my_queue</span>) is analogous to calling
<span class="keyword apiname">mq_unlink()</span> with <var class="keyword varname">name</var> set to the last elements
of the pathname (e.g., <span class="ph filepath">my_queue</span>).
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
-1 if the queue wasn't successfully unlinked 
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).
Any other value indicates that the queue was successfully unlinked.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">


<dt class="dt dlterm"><span class="keyword const">EACCES</span></dt>

<dd class="dd">You don't have permission to unlink the specified queue.</dd>




<dt class="dt dlterm"><span class="keyword const">ELOOP</span></dt>

<dd class="dd">Too many levels of symbolic links or prefixes.</dd>




<dt class="dt dlterm"><span class="keyword const">ENAMETOOLONG</span> </dt>

<dd class="dd">The length of <var class="keyword varname">name</var> exceeds <span class="keyword const">PATH_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOENT</span></dt>

<dd class="dd">The queue <var class="keyword varname">name</var> doesn't exist.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">The message queue manager (<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/m/mq.html"><span class="keyword cmdname">mq</span></a> or <a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/m/mqueue.html"><span class="keyword cmdname">mqueue</span></a>) isn't running. </dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1 MSG</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2230351e295">Safety:</th>
<th class="entry" valign="top" id="d2230351e297">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">Signal handler</td>
<td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">Thread</td>
<td class="entry" valign="top" headers="d2230351e295 d2230351e297 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>


<div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.sys_arch/topic/ipc_Message_queues.html" title="POSIX message queues (System Architecture)">POSIX message queues (System Architecture)</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.technotes/topic/managing_mq_mqueue.html" title="POSIX Message Queues: Two Implementations (Technotes)">POSIX Message Queues: Two Implementations (Technotes)</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mq_close.html" title="Close a message queue">mq_close()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mq_open.html" title="Open a message queue">mq_open()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/u/unlink.html" title="Remove a link to a file">unlink()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.utilities/topic/m/mq.html" title="mq (Utilities Reference)">mq (Utilities Reference)</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.utilities/topic/m/mqueue.html" title="mqueue (Utilities Reference)">mqueue (Utilities Reference)</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </div>
</body>
</html>