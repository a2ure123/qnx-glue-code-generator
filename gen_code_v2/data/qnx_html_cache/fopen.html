
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="fopen(), fopen64()" /><meta name="abstract" content="Open a file stream" /><meta name="description" content="Open a file stream" /><meta name="indexterms" content="fopen(), fopen64()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-f.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fclose.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcloseall.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fdopen.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/freopen.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/freopen.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="fopen" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>fopen(), fopen64()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="fopen">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-f.html" title="F">F</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-f.html" title="F"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">F</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">fopen()</span>, <span class="keyword apiname">fopen64()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Open a file stream</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;stdio.h&gt;

FILE * fopen( const char * <var class="keyword varname">filename</var>,
              const char * <var class="keyword varname">mode</var> );
          
FILE * fopen64( const char * <var class="keyword varname">filename</var>,
                const char * <var class="keyword varname">mode</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">filename</var></dt>

<dd class="dd">The name of the file that you want to open.</dd>




<dt class="dt dlterm"><var class="keyword varname">mode</var></dt>

<dd class="dd">The access mode; see below.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>

<p class="p">Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">




The <span class="keyword apiname">fopen()</span> function opens a file stream for the file 
specified by <var class="keyword varname">filename</var>.
The <span class="keyword apiname">fopen64()</span> function is a large-file support version of <span class="keyword apiname">fopen()</span>.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
In QNX Neutrino 6.6 or later, the large-file support functions and data types
appear in the name space only if you define <span class="keyword const">_LARGEFILE64_SOURCE</span> when you compile your code.
For more information, see
<span class="q">&#147;<a class="xref" href="../summary.html#summary__CLASSIFICATION">Classification</a>&#148;</span>
in What's in a Function Description?
</div>


<p class="p">
The <var class="keyword varname">mode</var> string begins with one of the following sequences:
</p>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><samp class="ph codeph">a</samp></dt>

<dd class="dd">Append: create a new file or open the file for writing at its end.</dd>




<dt class="dt dlterm"><samp class="ph codeph">a+</samp></dt>

<dd class="dd">Append: open the file or create it for update, writing at end-of-file.</dd>




<dt class="dt dlterm"><samp class="ph codeph">r</samp></dt>

<dd class="dd">Open the file for reading.</dd>




<dt class="dt dlterm"><samp class="ph codeph">r+</samp></dt>

<dd class="dd">Open the file for update (reading and/or writing).</dd>




<dt class="dt dlterm"><samp class="ph codeph">w</samp></dt>

<dd class="dd">Create the file for writing, or truncate it to zero length.</dd>




<dt class="dt dlterm"><samp class="ph codeph">w+</samp></dt>

<dd class="dd">Create the file for update, or truncate it to zero length.</dd>



</dl>


<p class="p">
You can add the letter <samp class="ph codeph">b</samp> to the end of any of the above sequences 
to indicate that the file is (or must be) a binary file (this is an ANSI
requirement for portability to systems that make a distinction between text
and binary files, such as DOS).
Under <span class="keyword">QNX Neutrino</span>, there's no difference between
text files and binary files.
</p>


<p class="p">
(QNX Neutrino 7.0 or later) You can add <samp class="ph codeph">x</samp> to the <samp class="ph codeph">w</samp> and <samp class="ph codeph">w+</samp>
specifiers to prevent the function from overwriting the file if it already exists.
</p>


<ul class="ul">
<li class="li">Opening a file in read mode (<samp class="ph codeph">r</samp> in the <var class="keyword varname">mode</var>)
  fails if the file doesn't exist or can't be read.
</li>


<li class="li">Opening a file in append mode (<samp class="ph codeph">a</samp> in the <var class="keyword varname">mode</var>)
  causes all subsequent writes to the file to be forced to the current
  end-of-file, regardless of previous calls to the 
   <a class="xref" href="fseek.html" title="Change the current position of a stream"><span class="keyword apiname">fseek()</span></a> function.
</li>


<li class="li">When a file is opened with update mode (<samp class="ph codeph">+</samp> in the
  <var class="keyword varname">mode</var>), both input and output may be performed on the associated stream.
</li>


</ul>


<div class="note note"><span class="notetitle">Note:</span> 
When you're using a stream in update mode, writing can't be followed by reading
without an intervening call to 
<a class="xref" href="fflush.html" title="Flush the buffers for a stream"><span class="keyword apiname">fflush()</span></a>, or to a
file-positioning function 
(<a class="xref" href="fseek.html" title="Change the current position of a stream"><span class="keyword apiname">fseek()</span></a>, 
<a class="xref" href="fsetpos.html" title="Set the current position of a file"><span class="keyword apiname">fsetpos()</span></a> or
<a class="xref" href="../r/rewind.html" title="Rewind a file stream to the beginning of the file"><span class="keyword apiname">rewind()</span></a>).
Similarly, reading can't be followed by writing without an
intervening call to a file-positioning function, unless the read
resulted in end-of-file.
</div>


<p class="p">
The largest value that can be represented correctly in an object of type
<span class="keyword dtype">off_t</span> is the offset maximum in the open
file description.
</p>

</div>

<div class="section"><h2 class="title sectiontitle" id="fopen__Buffer_size">Adjusting the buffer size</h2>

<p class="p">



By default, each stream gets a buffer of <span class="keyword const">BUFSIZ</span> characters.
It's allocated when you first read from or write to the stream, and the stream I/O functions
use it for their internal purposes.
If you're reading and writing large amounts of data, you can improve performance by increasing
the size of this internal buffer from the default specified by <span class="keyword const">BUFSIZE</span>:
</p>


<ul class="ul">
<li class="li">You can call
  <a class="xref" href="../s/setvbuf.html" title="Associate a buffer with a stream"><span class="keyword apiname">setvbuf()</span></a>
  or
  <a class="xref" href="../s/setbuffer.html" title="Assign block buffering to a stream"><span class="keyword apiname">setbuffer()</span></a>
  to provide your own buffer for a stream, but you have to do it after opening the stream but
  before doing any reading, writing, or seeking.
</li>


<li class="li">(QNX Neutrino 6.6 or later; a <span class="keyword">QNX Neutrino</span> extension)
  If you want to override <span class="keyword const">BUFSIZ</span>, you can set the <span class="keyword envar">STDIO_DEFAULT_BUFSIZE</span>
  environment variable.
  When the first thread in a process creates a buffer for stream I/O, the library looks for this variable
  and uses its value instead of <span class="keyword const">BUFSIZ</span> (if it's greater than <span class="keyword const">BUFSIZ</span>)
  for all standard I/O files in the process.
  
  
</li>


</ul>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
A pointer to a file stream for success, or <span class="keyword const">NULL</span> if an error occurs
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">EACCES</span></dt>

<dd class="dd">Search permission is denied on a component of the <var class="keyword varname">filename</var>
      prefix, or the file exists and the permissions specified by <var class="keyword varname">mode</var>
      are denied, or the file doesn't exist and write permission is denied
      for the parent directory of the file to be created.
</dd>




<dt class="dt dlterm"><span class="keyword const">EBADFSYS</span></dt>

<dd class="dd">While attempting to open the named file, either the file itself or a
  component of the <var class="keyword varname">filename</var> prefix was found to be corrupted.
  A system failureâfrom which no automatic recovery is possibleâoccurred while the file
  was being written to, or while the directory was being updated.
  You'll need to invoke appropriate systems-administration procedures to correct this situation before proceeding.
</dd>




<dt class="dt dlterm"><span class="keyword const">EBUSY</span></dt>

<dd class="dd">File access was denied due to a conflicting open
  (see <a class="xref" href="../s/sopen.html" title="Open a file for shared access"><span class="keyword apiname">sopen()</span></a>).
</dd>




<dt class="dt dlterm"><span class="keyword const">EINTR</span></dt>

<dd class="dd">The <span class="keyword apiname">fopen()</span> operation was interrupted by a signal.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">The value of the <var class="keyword varname">mode</var> argument isn't valid.</dd>




<dt class="dt dlterm"><span class="keyword const">EISDIR</span></dt>

<dd class="dd">The named file is a directory, and the <var class="keyword varname">mode</var>
  argument specifies write-only or read/write access.
</dd>




<dt class="dt dlterm"><span class="keyword const">ELOOP</span></dt>

<dd class="dd">Too many levels of symbolic links or prefixes.</dd>




<dt class="dt dlterm"><span class="keyword const">EMFILE</span></dt>

<dd class="dd">All file descriptors available to the process are currently open.</dd>




<dt class="dt dlterm"><span class="keyword const">ENAMETOOLONG</span></dt>

<dd class="dd">The length of the <var class="keyword varname">filename</var> string exceeds <span class="keyword const">PATH_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENFILE</span></dt>

<dd class="dd">Too many files are currently open in the system.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOENT</span></dt>

<dd class="dd">Either the named file or the <var class="keyword varname">filename</var> prefix doesn't
  exist, or the <var class="keyword varname">filename</var> argument points to an empty string.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOMEM</span></dt>

<dd class="dd">There isn't enough memory for the <span class="keyword dtype">FILE</span> structure.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSPC</span></dt>

<dd class="dd">The directory or filesystem that would contain the new file can't be extended.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">The <span class="keyword apiname">fopen()</span> function isn't implemented for the
  filesystem underlying the path specified in <var class="keyword varname">filename</var>.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOTDIR</span></dt>

<dd class="dd">A component of the <var class="keyword varname">filename</var> prefix isn't a directory.</dd>




<dt class="dt dlterm"><span class="keyword const">ENXIO</span></dt>

<dd class="dd">The media associated with the file (e.g., a CD) has been removed.</dd>




<dt class="dt dlterm"><span class="keyword const">EOVERFLOW</span></dt>

<dd class="dd">The named file is a regular file and the size of the file can't be
  represented correctly in an object of type <span class="keyword dtype">off_t</span>.
</dd>




<dt class="dt dlterm"><span class="keyword const">EROFS</span></dt>

<dd class="dd">The named file resides on a read-only filesystem.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<pre class="pre codeblock">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main( void )
{
    FILE *fp;

    fp = fopen( "report.dat", "r" );
    if( fp != NULL ) {
        /* rest of code goes here */
        fclose( fp );
        
        return EXIT_SUCCESS;
    }

    return EXIT_FAILURE;
}
</pre>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><span class="keyword apiname">fopen()</span> is <a class="xref" href="../summary.html#summary__CLASSIFICATION">ANSI</a>,
<a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a>;
<span class="keyword apiname">fopen64()</span> is <a class="xref" href="../summary.html#summary__CLASSIFICATION">Large-file support</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d1450672e713">Safety:</th>
<th class="entry" valign="top" id="d1450672e715">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">Cancellation point</td>
<td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">Signal handler</td>
<td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">Thread</td>
<td class="entry" valign="top" headers="d1450672e713 d1450672e715 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" title="Thread-local error variable">errno</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fclose.html" title="Close a stream">fclose()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcloseall.html" title="Close all open stream files">fcloseall()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fdopen.html" title="Associate a stream with a file descriptor">fdopen()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/freopen.html" title="Reopen a stream">freopen(), freopen64()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-f.html" title="F"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">F</span></a></span>  </div>
</body>
</html>