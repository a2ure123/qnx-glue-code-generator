
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="select_attach()" /><meta name="abstract" content="Attach a file descriptor to a dispatch handle" /><meta name="description" content="Attach a file descriptor to a dispatch handle" /><meta name="indexterms" content="select_attach()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-s.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dispatch_create.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dispatch_create_channel.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/select_detach.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/select_query.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="select_attach" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>select_attach()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="select_attach">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-s.html" title="S">S</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-s.html" title="S"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">S</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">select_attach()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Attach a file descriptor to a dispatch handle</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/iofunc.h&gt;
#include &lt;sys/dispatch.h&gt;

int select_attach( void *<var class="keyword varname">dpp</var>,
          select_attr_t *<var class="keyword varname">attr</var>,
          int <var class="keyword varname">fd</var>,
          unsigned <var class="keyword varname">flags</var>,
          int (*<var class="keyword varname">func</var>)( select_context_t *<var class="keyword varname">ctp</var>,
                      int <var class="keyword varname">fd</var>,
                      unsigned <var class="keyword varname">flags</var>,
                      void *<var class="keyword varname">handle</var> ),
          void *<var class="keyword varname">handle</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">dpp</var></dt>

<dd class="dd">The dispatch handle, as returned by a successful call to
  <a class="xref" href="../d/dispatch_create.html" title="Allocate a dispatch structure and create the channel associated with it"><span class="keyword apiname">dispatch_create()</span></a>
  or
  <a class="xref" href="../d/dispatch_create_channel.html" title="Allocate a dispatch structure, specifying a channel ID"><span class="keyword apiname">dispatch_create_channel()</span></a>,
  that you want to attach to a file descriptor.
</dd>




<dt class="dt dlterm"><var class="keyword varname">attr</var></dt>

<dd class="dd">Not currently used; pass <span class="keyword const">NULL</span> for this argument.
  
</dd>




<dt class="dt dlterm"><var class="keyword varname">fd</var></dt>

<dd class="dd">The file descriptor that you want to attach to the dispatch handle.</dd>




<dt class="dt dlterm"><var class="keyword varname">flags</var></dt>

<dd class="dd">Flags that specify the events that you're interested in.
  For more information, see
  <span class="q">&#147;<a class="xref" href="#select_attach__flags">Flags</a>,&#148;</span>
  below.
</dd>




<dt class="dt dlterm"><var class="keyword varname">func</var></dt>

<dd class="dd">The function that you want to call when the file descriptor unblocks.
  For more information, see
  <span class="q">&#147;<a class="xref" href="#select_attach__func">Function</a>,&#148;</span>
  below.
</dd>




<dt class="dt dlterm"><var class="keyword varname">handle</var></dt>

<dd class="dd">A pointer to arbitrary data that you want to pass to <var class="keyword varname">func</var>.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">



The function <span class="keyword apiname">select_attach()</span> attaches the
file descriptor <var class="keyword varname">fd</var> to the dispatch handle <var class="keyword varname">dpp</var>
and selects <a class="xref" href="#select_attach__flags"><var class="keyword varname">flags</var></a> events.
When <var class="keyword varname">fd</var> <span class="q">&#147;unblocks&#148;</span>, <var class="keyword varname">func</var>
is called with <var class="keyword varname">handle</var>.
</p>


<p class="p" id="select_attach__flags"><strong class="ph b">Flags</strong></p>


<p class="p">
The available flags are defined in <span class="ph filepath">&lt;sys/dispatch.h&gt;</span>.
The following flags use <span class="keyword apiname">ionotify()</span> mechanisms (see 
<a class="xref" href="../i/ionotify.html" title="Arm a resource manager"><span class="keyword apiname">ionotify()</span></a>
for further details):
</p>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">SELECT_FLAG_EXCEPT</span></dt>

<dd class="dd">Out-of-band data is available.
  The definition of out-of-band data depends on the resource manager.
  
</dd>




<dt class="dt dlterm"><span class="keyword const">SELECT_FLAG_READ</span></dt>

<dd class="dd">There's input data available.
  The amount of data available defaults to 1.
  For a character device such as a serial port, this is a character.
  For a POSIX message queue, it's a message.
  Each resource manager selects an appropriate object.
  
</dd>




<dt class="dt dlterm"><span class="keyword const">SELECT_FLAG_WRITE</span></dt>

<dd class="dd">There's room in the output buffer for more data.
  The amount of room available needed to satisfy this condition depends on the resource manager.
  Some resource managers may default to an empty output buffer, while others may choose some
  percentage of the empty buffer.
  
</dd>



</dl>


<p class="p">
These flags are specific to dispatch:
</p>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">SELECT_FLAG_REARM</span></dt>

  <dd class="dd">Rearm the <var class="keyword varname">fd</var> after an event is dispatched. This is the default behaviour.
  
</dd>





    <dt class="dt dlterm"><span class="keyword const">SELECT_FLAG_NOREARM</span></dt>

    <dd class="dd">Do not rearm the <var class="keyword varname">fd</var> after an event is dispatched. Notification will occur only once, unless <span class="keyword apiname">select_attach()</span> is called again.
      
    </dd>

  


<dt class="dt dlterm"><span class="keyword const">SELECT_FLAG_SRVEXCEPT</span></dt>

<dd class="dd">Register a function that's called whenever a server, to which this client is connected, dies.
  (This flag uses the
  <a class="xref" href="../c/channelcreate.html" title="Create a communications channel"><span class="keyword apiname">ChannelCreate()</span></a>
  function's <span class="keyword const">_NTO_CHF_COID_DISCONNECT</span> flag.
  In this case, <var class="keyword varname">fd</var> is ignored.)
  
</dd>



</dl>


<p class="p" id="select_attach__func"><strong class="ph b">Function</strong></p>


<p class="p">
The argument <var class="keyword varname">func</var> is the user-supplied function that's
called when one of the registered events occurs on <var class="keyword varname">fd</var>.
This function should return 0 (zero); other values are reserved.
The function is passed the following arguments:
</p>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">ctp</var></dt>

<dd class="dd">Context pointer.</dd>




<dt class="dt dlterm"><var class="keyword varname">fd</var></dt>

<dd class="dd">The <var class="keyword varname">fd</var> on which the event occurred.</dd>




<dt class="dt dlterm"><var class="keyword varname">flags</var></dt>

<dd class="dd">The type of event that occurred.
  The possible <var class="keyword varname">flags</var> are:

  <ul class="ul">
  <li class="li"><span class="keyword const">SELECT_FLAG_EXCEPT</span></li>

  <li class="li"><span class="keyword const">SELECT_FLAG_READ</span></li>

  <li class="li"><span class="keyword const">SELECT_FLAG_WRITE</span></li>

  </ul>


  <p class="p">
  For descriptions of the flags passed to <var class="keyword varname">func</var>, see
  <span class="q">&#147;<a class="xref" href="#select_attach__flags">Flags</a>,&#148;</span>
  above.
  </p>

</dd>




<dt class="dt dlterm"><var class="keyword varname">handle</var></dt>

<dd class="dd">The <var class="keyword varname">handle</var> passed to <span class="keyword apiname">select_attach()</span>.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
Zero on success, or -1 if an error occurred
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">(QNX Neutrino 7.1 or later) You've already called
  <a class="xref" href="../d/dispatch_context_alloc.html" title="Return a dispatch context"><span class="keyword apiname">dispatch_context_alloc()</span></a>
  for a dpp with <span class="keyword const">DISPATCH_FLAG_NOLOCK</span> set, and you've now tried to do a first
  <span class="keyword apiname">select_attach()</span>.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOMEM</span></dt>

<dd class="dd">Insufficient memory was available.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<p class="p">
For an example with <span class="keyword apiname">select_attach()</span>,
see <a class="xref" href="../d/dispatch_create.html" title="Allocate a dispatch structure and create the channel associated with it"><span class="keyword apiname">dispatch_create()</span></a>.
For other examples using the dispatch interface, see
<a class="xref" href="../m/message_attach.html" title="Attach a message range"><span class="keyword apiname">message_attach()</span></a>,
<a class="xref" href="../r/resmgr_attach.html" title="Attach a path to the pathname space"><span class="keyword apiname">resmgr_attach()</span></a>,  and
<a class="xref" href="../t/thread_pool_create.html" title="Create a thread pool handle"><span class="keyword apiname">thread_pool_create()</span></a>.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>


<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2572011e597">Safety:</th>
<th class="entry" valign="top" id="d2572011e599">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">Signal handler</td>
<td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">Thread</td>
<td class="entry" valign="top" headers="d2572011e597 d2572011e599 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>


<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dispatch_create.html" title="Allocate a dispatch structure and create the channel associated with it">dispatch_create()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dispatch_create_channel.html" title="Allocate a dispatch structure, specifying a channel ID">dispatch_create_channel()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/select_detach.html" title="Detach a file descriptor from a dispatch handle">select_detach()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/select_query.html" title="Decode the last select event">select_query()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-s.html" title="S"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">S</span></a></span>  </div>
</body>
</html>