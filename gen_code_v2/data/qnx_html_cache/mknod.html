
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="mknod()" /><meta name="abstract" content="Make a new filesystem entry" /><meta name="description" content="Make a new filesystem entry" /><meta name="indexterms" content="mknod()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mkdir.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mkfifo.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mknodat.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="mknod" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>mknod()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="mknod">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M">M</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">mknod()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Make a new filesystem entry</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/stat.h&gt;

int mknod( const char* <var class="keyword varname">path</var>,
           mode_t <var class="keyword varname">mode</var>,
           dev_t <var class="keyword varname">dev</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">path</var></dt>

<dd class="dd">The pathname that you want to use for the file.</dd>




<dt class="dt dlterm"><var class="keyword varname">mode</var></dt>

<dd class="dd">A set of bits that define the file type and access permissions that you want to use.
  The valid file types are:

  <ul class="ul">
  <li class="li"><span class="keyword const">S_IFDIR</span> â create a directory.
    
  </li>


  <li class="li"><span class="keyword const">S_IFIFO</span> â create a FIFO.
    
  </li>

  </ul>


  <p class="p">
  For more information, see the entry for
  <a class="xref" href="../s/stat_struct.html" title="Data structure for information about a file or directory"><span class="keyword dtype">struct stat</span></a>.
  </p>

</dd>




<dt class="dt dlterm"><var class="keyword varname">dev</var></dt>

<dd class="dd">Ignored.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>

<p class="p">Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">




The <span class="keyword apiname">mknod()</span> function makes a file, named <var class="keyword varname">path</var>, 
using the file type encoded in the <var class="keyword varname">mode</var> argument. 
Supported file types are directories and FIFOs. 
</p>


<div class="note note"><span class="notetitle">Note:</span> 
This function is included to enhance portability with software written for Unix-compatible operating systems. 
For POSIX portability, use <a class="xref" href="mkdir.html" title="Create a directory"><span class="keyword apiname">mkdir()</span></a> or
<a class="xref" href="mkfifo.html" title="Create a FIFO special file"><span class="keyword apiname">mkfifo()</span></a> instead.
</div>


<div class="p">
To make a directory with read-write-execute permissions for everyone, you could use the following: 
<pre class="pre codeblock">
mknod (<var class="keyword varname">name</var>, S_IFDIR | 0777, 0);
</pre>

</div>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<dl class="dl" compact="compact">


<dt class="dt dlterm">0</dt>

<dd class="dd">Success.</dd>




<dt class="dt dlterm">-1</dt>

<dd class="dd">An error occurred (<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EACCES</span></dt>

<dd class="dd">A component of the <var class="keyword varname">path</var> prefix denies search permission, 
  or write permission is denied for the parent directory.
</dd>




<dt class="dt dlterm"><span class="keyword const">EEXIST</span></dt>

<dd class="dd">The named file already exists.</dd>




<dt class="dt dlterm"><span class="keyword const">ELOOP</span></dt>

<dd class="dd">There are too many levels of symbolic links or prefixes.</dd>




<dt class="dt dlterm"><span class="keyword const">EMLINK</span></dt>

<dd class="dd">The link count of the parent directory would exceed <span class="keyword const">LINK_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENAMETOOLONG</span></dt>

<dd class="dd">The length of the <var class="keyword varname">path</var> string exceeds <span class="keyword const">PATH_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOENT</span></dt>

<dd class="dd">A component of the <var class="keyword varname">path</var> prefix doesn't exist, 
  or the <var class="keyword varname">path</var> argument points to an empty string.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSPC</span></dt>

<dd class="dd">
The filesystem doesn't contain enough space to hold the contents of
the new directory or to extend the parent directory,
or the maximum limit of files and directories has been reached.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">The <span class="keyword apiname">mknod()</span> function isn't implemented for the filesystem underlying
  the specified path.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOTDIR</span></dt>

<dd class="dd">A component of the <var class="keyword varname">path</var> prefix isn't a directory.</dd>




<dt class="dt dlterm"><span class="keyword const">EROFS</span></dt>

<dd class="dd">The named file resides on a read-only filesystem.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<pre class="pre codeblock">
/*
 * Create special files as a directory or FIFO
 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;

int main( int argc, char** argv )
  {
    int c;
    mode_t mode = 0666;
    int ecode = 0;

    if( argc == 1 ) {
      printf( "Use: %s [-d directory] ... [-f fifo] ... \n",
          argv[0] );
      return( 0 );
    }

    while(( c = getopt( argc, argv, "d:f:" )) != -1 ) {
      switch( c ) {
        case 'd': mode = S_IFDIR | 0666; break;
        case 'f': mode = S_IFIFO | 0666; break;
      }

      if( mknod( optarg, mode, 0 ) != 0 ) {
        perror( optarg );
        ++ecode;
      }
    }

    return( ecode );
  }
</pre>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2197185e389">Safety:</th>
<th class="entry" valign="top" id="d2197185e391">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">Signal handler</td>
<td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">Thread</td>
<td class="entry" valign="top" headers="d2197185e389 d2197185e391 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" title="Thread-local error variable">errno</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mkdir.html" title="Create a directory">mkdir()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mkfifo.html" title="Create a FIFO special file">mkfifo()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mknodat.html" title="Make a new filesystem entry at a given location">mknodat()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </div>
</body>
</html>