
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="chmod()" /><meta name="abstract" content="Change the permissions for a file" /><meta name="description" content="Change the permissions for a file" /><meta name="indexterms" content="chmod()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/chown.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fchmod.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fchmodat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="chmod" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>chmod()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="chmod">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C">C</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">chmod()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>



<div class="body refbody"><p class="shortdesc"><em class="ph i">Change the permissions for a file</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;

int chmod( const char * <var class="keyword varname">path</var>, 
           mode_t <var class="keyword varname">mode</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">path</var></dt>

<dd class="dd">The name of the file whose permissions you want to change.</dd>




<dt class="dt dlterm"><var class="keyword varname">mode</var></dt>

<dd class="dd">The new permissions for the file.
  For more information, see the entry for
  <a class="xref" href="../s/stat_struct.html" title="Data structure for information about a file or directory"><span class="keyword dtype">struct stat</span></a>.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>

<p class="p">Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">






The <span class="keyword apiname">chmod()</span> function changes 
<span class="keyword const">S_ISUID</span>, <span class="keyword const">S_ISGID</span>, <span class="keyword const">S_ISVTX</span> 
and the file permission bits of the file specified by 
the pathname pointed to by <var class="keyword varname">path</var> to the corresponding
bits in the <var class="keyword varname">mode</var> argument. 
The application must ensure that the effective user ID of the process 
matches the owner of the file or the process has appropriate privileges to do this.
</p>


<p class="p">
If a directory is writable and the sticky bit (<span class="keyword const">S_ISVTX</span>) is set on the directory, 
a process can remove or rename a file within that directory only if one
or more of the following is also true:
</p>


<ul class="ul">
<li class="li">The effective user ID of the process matches the file's owner ID.</li>

<li class="li">The effective user ID of the process matches the directory's owner ID.</li>

<li class="li">The file is writable by the effective user ID of the process.</li>

<li class="li">The process has the <span class="keyword const">IOFUNC_ABILITYID_EXEC</span> ability (see
  <a class="xref" href="../i/iofunc_ability_check.html" title="Verify that the client has a given resource manager ability"><span class="keyword apiname">iofunc_ability_check()</span></a>).
  
</li>

</ul>


<p class="p">
If a directory has the set-group ID bit set, 
a file created in that directory will have the same group ID as that directory.
Otherwise, the newly created file's group ID is set to the effective group ID of the creating process.
</p>


<p class="p">
If the calling process doesn't have appropriate privileges, 
and if the group ID of the file doesn't match the effective group ID, and
the file is a regular file, bit <span class="keyword const">S_ISGID</span> (set-group-ID on execution) 
in the file's mode is cleared on a successful return from
<span class="keyword apiname">chmod()</span>.
</p>


<p class="p">
If the effective user ID of the calling process is equal to the file owner, 
or the calling process has the <span class="keyword const">IOFUNC_ABILITYID_EXEC</span> ability,
<span class="keyword apiname">chmod()</span> sets 
<span class="keyword const">S_ISUID</span>,
<span class="keyword const">S_ISGID</span> and the file permission bits, defined in the <span class="ph filepath">&lt;sys/stat.h&gt;</span> header file,
from the corresponding bits in the <var class="keyword varname">mode</var> argument. 
These bits define access permissions for the user associated with the file, 
the group associated with the file and all others.


</p>


<p class="p">
This call has no effect on file descriptors for files that are already open.
</p>


<p class="p">
If <span class="keyword apiname">chmod()</span> succeeds, the <var class="keyword varname">st_ctime</var> field of the file is marked for update.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
0, or -1 if an error occurred 
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a>
is set).
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">EACCES</span></dt>

<dd class="dd">Search permission is denied on a component of the path prefix.</dd>




<dt class="dt dlterm"><span class="keyword const">ELOOP</span></dt>

<dd class="dd">Too many levels of symbolic links or prefixes.</dd>




<dt class="dt dlterm"><span class="keyword const">ENAMETOOLONG</span></dt>

<dd class="dd">The length of the <var class="keyword varname">path</var> string exceeds <span class="keyword const">PATH_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOENT</span></dt>

<dd class="dd">The file doesn't exist, or the <var class="keyword varname">path</var> argument points to an empty string.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOTDIR</span></dt>

<dd class="dd">A component of the path prefix isn't a directory.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">The <span class="keyword apiname">chmod()</span> function isn't implemented for the filesystem underlying
  the path specified in <var class="keyword varname">path</var>.
</dd>




<dt class="dt dlterm"><span class="keyword const">EPERM</span></dt>

<dd class="dd">The effective user ID doesn't match the owner of the file, and the
  calling process doesn't have appropriate privileges.
</dd>




<dt class="dt dlterm"><span class="keyword const">EROFS</span></dt>

<dd class="dd">The file resides on a read-only filesystem.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<pre class="pre codeblock">
/*
 * Change the permissions of a list of files
 * to by read/write by the owner only
 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;

int main( int argc, char **argv )
{
    int i;
    int ecode = 0;

    for( i = 1; i &lt; argc; i++ ) {
        if( chmod( argv[i], S_IRUSR | S_IWUSR ) == -1 ) {
            perror( argv[i] );
            ecode++;
        }
    }

    return ecode;
}
</pre>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d1289137e386">Safety:</th>
<th class="entry" valign="top" id="d1289137e388">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">Cancellation point</td>
<td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">Signal handler</td>
<td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">Thread</td>
<td class="entry" valign="top" headers="d1289137e386 d1289137e388 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/chown.html" title="Change the user ID and group ID of a file">chown()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" title="Thread-local error variable">errno</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fchmod.html" title="Change the permissions for a file">fchmod()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fchmodat.html" title="Change the permissions for a file at a given location">fchmodat()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" title="Get file information, given a file description">fstat(), fstat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" title="Open a file">open(), open64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" title="Get information about a file or directory, given a path">stat(), stat64()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </div>
</body>
</html>