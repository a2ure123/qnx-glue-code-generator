
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="posix_typed_mem_open()" /><meta name="abstract" content="Open a typed memory object" /><meta name="description" content="Open a typed memory object" /><meta name="indexterms" content="posix_typed_mem_open()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.sys_arch/topic/ipc_Typed_memory.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.prog/topic/memory.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/close.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup2.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/ftruncate.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mmap.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msync.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/posix_mem_offset.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/posix_typed_mem_get_info.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="posix_typed_mem_open" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>posix_typed_mem_open()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="posix_typed_mem_open">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P">P</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">P</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">posix_typed_mem_open()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Open a typed memory object</em></p>


<div class="section">
<p class="p">



</p>

</div>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/mman.h&gt;
#include &lt;fcntl.h&gt;

int posix_typed_mem_open( const char * <var class="keyword varname">name</var>,
                          int <var class="keyword varname">oflag</var>,
                          int <var class="keyword varname">tflag</var>);
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><var class="keyword varname">name</var></dt>

<dd class="dd">A pointer to the string that specifies the typed memory object.</dd>




<dt class="dt dlterm"><var class="keyword varname">oflag</var></dt>

<dd class="dd">The access mode to use; one of: 

  <dl class="dl">
  
  <dt class="dt dlterm"><span class="keyword const">O_RDONLY</span></dt>

  <dd class="dd">Open for read access only.
    
  </dd>

  

  
  <dt class="dt dlterm"><span class="keyword const">O_WRONLY</span></dt>

  <dd class="dd">Open for write access only.
    
  </dd>

  

  
  <dt class="dt dlterm"><span class="keyword const">O_RDWR</span></dt>

  <dd class="dd">Open for read or write access.
    
  </dd>

  

  </dl>

</dd>




<dt class="dt dlterm"><var class="keyword varname">tflag</var></dt>

<dd class="dd">Flags that determine how the typed memory object behaves when mapped; at most one of:

  <dl class="dl">
  
  <dt class="dt dlterm"><span class="keyword const">POSIX_TYPED_MEM_ALLOCATE</span></dt>

  <dd class="dd">Allocate on <span class="keyword apiname">mmap()</span>.
    
  </dd>

  

  
  <dt class="dt dlterm"><span class="keyword const">POSIX_TYPED_MEM_ALLOCATE_CONTIG</span></dt>

  <dd class="dd">Allocate contiguously on <span class="keyword apiname">mmap()</span>.
    
  </dd>

  

  
  <dt class="dt dlterm"><span class="keyword const">POSIX_TYPED_MEM_MAP_ALLOCATABLE</span></dt>

  <dd class="dd">Map on <span class="keyword apiname">mmap()</span> without affecting the availability for allocation.
    
  </dd>

  

  </dl>

</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">
The <span class="keyword apiname">posix_typed_mem_open()</span> function establishes a 
connection between the typed memory object specified by the <var class="keyword varname">name</var> and a 
file descriptor. It creates an open file description that refers to 
the typed memory object and a file descriptor that refers to the open 
file description.
</p>

<p class="p">
The names of typed memory regions are derived directly from the names of
the <var class="keyword varname">asinfo</var> segments.
The <var class="keyword varname">asinfo</var> section itself describes a hierarchy, and so the
naming of typed memory object is a hierarchy.
</p>


<p class="p">
The <span class="keyword apiname">posix_typed_mem_open()</span> function resolves the name as follows:
</p>


<ol class="ol">
<li class="li">If the name starts with a leading <samp class="ph codeph">/</samp>, an exact match is done.</li>


<li class="li">The name may contain intermediate <samp class="ph codeph">/</samp> characters.
  These are considered as path component separators.
  If multiple path components are specified, they're matched from the
  bottom up (the opposite of the way filenames are resolved).
</li>




<li class="li">If the name doesn't start with a leading <samp class="ph codeph">/</samp>, a tail match is
  done on the pathname components specified.
</li>


<li class="li">The name can include ampersands and vertical bars (<tt class="ph tt">&amp;</tt> and <tt class="ph tt">|</tt>) between segments to specify
  intersections and unions, respectively.
  A name can contain an arbitrary number of intersections and unions; they're evaluated from left to right.
  Parentheses aren't supported.
</li>


</ol>


<p class="p">
For more information, see
<span class="q">&#147;<a class="xref" href="../../../com.qnx.doc.neutrino.sys_arch/topic/ipc_Typed_memory.html">Typed memory</a>&#148;</span>
in the Interprocess Communication (IPC) chapter of the <cite class="cite">System Architecture</cite> guide.
</p>


<p class="p">
The file descriptor is used by other functions to refer to that typed memory object.
</p>


<p class="p">
The setting of <var class="keyword varname">tflag</var> affects what happens when you call
<a class="xref" href="../m/mmap.html" title="Map a memory region into a process's address space"><span class="keyword apiname">mmap()</span></a>
with the file descriptor for the typed memory object:
</p>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">POSIX_TYPED_MEM_ALLOCATE</span></dt>

<dd class="dd">The <span class="keyword apiname">mmap()</span> function allocates and maps typed memory from the
  specified typed memory pool.
  The allocated memory is either a previously unallocated contiguous  
  area of the typed memory pool, or several noncontiguous previously 
  unallocated areas (mapped to a contiguous portion of the process address space). 
</dd>




<dt class="dt dlterm"><span class="keyword const">POSIX_TYPED_MEM_ALLOCATE_CONTIG</span></dt>

<dd class="dd">The <span class="keyword apiname">mmap()</span> function allocates and maps a previously 
  unallocated single contiguous area of the typed memory pool (also mapped
  to a contiguous portion of the process address space). 
</dd>




<dt class="dt dlterm">Neither <span class="keyword const">POSIX_TYPED_MEM_ALLOCATE</span> nor <span class="keyword const">POSIX_TYPED_MEM_ALLOCATE_CONTIG</span></dt>

<dd class="dd">The <span class="keyword apiname">mmap()</span> function maps an application-chosen area from
  the specified typed memory pool.

  <div class="note note"><span class="notetitle">Note:</span> 
  The mapped area is unavailable for allocation until all processes unmap it.
  </div>

</dd>




<dt class="dt dlterm"><span class="keyword const">POSIX_TYPED_MEM_MAP_ALLOCATABLE</span></dt>

<dd class="dd">The <span class="keyword apiname">mmap()</span> function maps an application-chosen area from
  the specified typed memory pool without affecting the availability of that area for 
  allocation; that is, mapping such an object leaves each byte of the 
  mapped area unallocated if it was unallocated prior to the mapping, or 
  allocated if it was allocated prior to the mapping.
</dd>



</dl>


<p class="p">
If  <var class="keyword varname">tflag</var> is 0 or <span class="keyword const">POSIX_TYPED_MEM_MAP_ALLOCATABLE</span>,
the offset parameter to <span class="keyword apiname">mmap()</span> specifies the starting physical
address in the typed memory region; if the typed memory region
is discontiguous (multiple <var class="keyword varname">asinfo</var> entries), the allowed offset
values are also discontiguous and don't start at zero as they do for shared memory objects.
If you specify a [<var class="keyword varname">paddr</var>, <var class="keyword varname">paddr</var> + <var class="keyword varname">size</var>)
region that falls outside the allowed addresses for the typed memory object,
<span class="keyword apiname">mmap()</span> fails with <span class="keyword const">ENXIO</span>.
</p>


<p class="p">
The <var class="keyword varname">oflag</var> controls what permissions you're allowed to <span class="keyword apiname">mmap()</span> with.
For example, if <var class="keyword varname">oflag</var> is <span class="keyword const">O_RDONLY</span>, you can't do a
<span class="keyword apiname">mmap()</span> with <span class="keyword const">MAP_SHARED</span> and <span class="keyword const">PROT_WRITE</span>.
</p>


<p class="p">
If successful, <span class="keyword apiname">posix_typed_mem_open()</span> returns a file descriptor for 
the typed memory object that is the lowest numbered file descriptor not currently open for that process.
The open file descriptor is new and isn't shared with any other processes.
The <span class="keyword const">FD_CLOEXEC</span> file descriptor flag associated with the new file descriptor is  cleared.
</p>


<p class="p">
The
<a class="xref" href="../m/mmap.html" title="Map a memory region into a process's address space"><span class="keyword apiname">mmap()</span></a>,
<a class="xref" href="posix_mem_offset.html" title="Get the physical address and length of a mapped memory block"><span class="keyword apiname">posix_mem_offset()</span></a>,
<a class="xref" href="posix_typed_mem_get_info.html" title="Get information about a typed memory object"><span class="keyword apiname">posix_typed_mem_get_info()</span></a>,
<a class="xref" href="../f/fstat.html" title="Get file information, given a file description"><span class="keyword apiname">fstat()</span></a>,
<a class="xref" href="../d/dup.html" title="Duplicate a file descriptor"><span class="keyword apiname">dup()</span></a>,
<a class="xref" href="../d/dup2.html" title="Duplicate a file descriptor, specifying the new descriptor"><span class="keyword apiname">dup2()</span></a>,
and
<a class="xref" href="../c/close.html" title="Close a file"><span class="keyword apiname">close()</span></a>
functions can operate on a file descriptor that
<span class="keyword apiname">posix_typed_mem_open()</span> returns.
Memory that's mapped from a typed-memory file descriptor is implicitly locked.
</p>


<p class="p">
As <span class="keyword">QNX Neutrino</span> extensions:
</p>


<ul class="ul">
<li class="li"><a class="xref" href="../m/msync.html" title="Synchronize memory with physical storage"><span class="keyword apiname">msync()</span></a>
  flushes and/or invalidates the data and or instruction cache for the
  specified  memory region
</li>


<li class="li"><a class="xref" href="../f/ftruncate.html" title="Truncate a file"><span class="keyword apiname">ftruncate()</span></a>
  and other file operations indicate an error of <span class="keyword const">ENOSYS</span>
</li>


</ul>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
A nonnegative integer that represents the lowest-numbered unused file
descriptor, or -1 if an error occurred (<var class="keyword varname">errno</var> is set).
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EACCES</span></dt>

<dd class="dd">The typed memory object exists, and the permissions specified by <var class="keyword varname">oflag</var> are denied.</dd>




<dt class="dt dlterm"><span class="keyword const">EINTR</span></dt>

<dd class="dd">The <span class="keyword apiname">posix_typed_mem_open()</span> function was interrupted by a signal.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">The flags specified in <var class="keyword varname">tflag</var> are invalid (more than one of 
  <span class="keyword const">POSIX_TYPED_MEM_ALLOCATE</span>, <span class="keyword const">POSIX_TYPED_MEM_ALLOCATE_CONTIG</span>, and
  <span class="keyword const">POSIX_TYPED_MEM_MAP_ALLOCATABLE</span> is specified). 
</dd>




<dt class="dt dlterm"><span class="keyword const">EMFILE</span></dt>

<dd class="dd">All file descriptors available to the process are currently open.</dd>




<dt class="dt dlterm"><span class="keyword const">ENAMETOOLONG</span></dt>

<dd class="dd">The length of the <var class="keyword varname">name</var> argument exceeds <span class="keyword const">PATH_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENFILE</span></dt>

<dd class="dd">Too many file descriptors are currently open in the system.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOENT</span></dt>

<dd class="dd">The named typed memory object doesn't exist.</dd>




<dt class="dt dlterm"><span class="keyword const">EPERM</span></dt>

  <dd class="dd">The caller lacks the <span class="keyword const">PROCMGR_AID_MEM_PHYS</span> ability for the address range covered by the specified region.
  
  
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>


<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1 TYM</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2357388e681">Safety:</th>
<th class="entry" valign="top" id="d2357388e683">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">Signal handler</td>
<td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">Thread</td>
<td class="entry" valign="top" headers="d2357388e681 d2357388e683 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.sys_arch/topic/ipc_Typed_memory.html" title="Typed memory (System Architecture)">Typed memory (System Architecture)</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.prog/topic/memory.html" title="Working with Memory (QNX Neutrino Programmer's Guide)">Working with Memory (<span class="keyword">QNX Neutrino</span> Programmer's Guide)</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/close.html" title="Close a file">close()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup.html" title="Duplicate a file descriptor">dup()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup2.html" title="Duplicate a file descriptor, specifying the new descriptor">dup2()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" title="Get file information, given a file description">fstat(), fstat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/ftruncate.html" title="Truncate a file">ftruncate(), ftruncate64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mmap.html" title="Map a memory region into a process's address space">mmap(), mmap64(), mmap_handle()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msync.html" title="Synchronize memory with physical storage">msync()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/posix_mem_offset.html" title="Get the physical address and length of a mapped memory block">posix_mem_offset(), posix_mem_offset64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/posix_typed_mem_get_info.html" title="Get information about a typed memory object">posix_typed_mem_get_info()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">P</span></a></span>  </div>
</body>
</html>