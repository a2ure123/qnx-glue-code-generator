
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="inet6_option_alloc()" /><meta name="abstract" content="Append IPv6 hop-by-hop or destination options into ancillary data object" /><meta name="description" content="Append IPv6 hop-by-hop or destination options into ancillary data object" /><meta name="indexterms" content="inet6_option_alloc()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_append.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_find.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_init.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_next.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_space.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="inet6_option_alloc" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>inet6_option_alloc()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="inet6_option_alloc">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" title="I">I</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" title="I"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">I</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">inet6_option_alloc()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Append IPv6 hop-by-hop or destination options into ancillary data
object</em></p>


<div class="section">

<p class="p">







</p>

</div>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;netinet/in.h&gt;

u_int8_t * inet6_option_alloc(struct cmsghdr *<var class="keyword varname">cmsg</var>, 
                              int <var class="keyword varname">datalen</var>, 
                              int <var class="keyword varname">multx</var>,
                              int <var class="keyword varname">plusy</var>);


</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">cmsg</var></dt>

<dd class="dd">A pointer to the <span class="keyword dtype">cmsghdr</span>
  structure that must have been initialized by <span class="keyword apiname">inet6_option_init()</span>.
</dd>




<dt class="dt dlterm"><var class="keyword varname">datalen</var></dt>

<dd class="dd">The length of the option, in bytes. 
  This value is required as an argument to allow the function
  to determine if padding should be appended at the end of the option,
  argument since the option data length must already be stored by the caller (the
  <span class="keyword apiname">inet6_option_append()</span> function doesn't need a data length).
</dd>




<dt class="dt dlterm"><var class="keyword varname">multx</var></dt>

<dd class="dd">The value <var class="keyword varname">x</var> in the alignment term
  <var class="keyword varname">xn</var><samp class="ph codeph"> + </samp><var class="keyword varname">y</var>.
  It must have a value of 1, 2, 4, or 8.
</dd>




<dt class="dt dlterm"><var class="keyword varname">plusy</var></dt>

<dd class="dd">Value <var class="keyword varname">y</var> in the alignment term
  <var class="keyword varname">xn</var><samp class="ph codeph"> + </samp><var class="keyword varname">y</var>.
  It must have a value between 0 and 7, inclusive.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libsocket</span></p>

<p class="p">Use the <span class="keyword option">-l socket</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">
The <span class="keyword apiname">inet6_option_alloc()</span> function appends a hop-by-hop option or a destination option 
into an ancillary data object that has been initialized by
<span class="keyword apiname">inet6_option_init()</span>.
</p>


<p class="p">
The difference between this function and <span class="keyword apiname">inet6_option_append()</span> is 
that the latter copies the contents of the previously built option into the 
ancillary data object. This  function returns a pointer to the
space in the data object where the option's type-length-value or TLV must then be built by the
caller.
</p>


<p class="p"><strong class="ph b">Based on:</strong></p>


<ul class="ul">
<li class="li">W. Stevens and M. Thomas, Advanced Sockets API for IPv6,
<cite class="cite">RFC 2292</cite>, February 1998. Contains examples.
</li>


<li class="li">S. Deering and R. Hinden, Internet Protocol, Version 6
(IPv6) Specification, <cite class="cite">RFC 2460</cite>, December 1998.
</li>


</ul>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
A pointer to the 8-bit option type field that starts the option, or <span class="keyword const">NULL</span> if an error occurred.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">RFC 2292</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d1965275e239">Safety:</th>
<th class="entry" valign="top" id="d1965275e241">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">Cancellation point</td>
<td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">Signal handler</td>
<td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">Thread</td>
<td class="entry" valign="top" headers="d1965275e239 d1965275e241 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_append.html" title="Append an IPv6 hop-by-hop or destination option to an ancillary data object">inet6_option_append()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_find.html" title="Search for IPv6 hop-by-hop and destination options">inet6_option_find()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_init.html" title="Initialize an ancillary data object that contains IPv6 hop-by-hop and destination options">inet6_option_init()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_next.html" title="Find the next IPv6 hop-by-hop or destination option">inet6_option_next()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/inet6_option_space.html" title="Determine how much space an IPv6 hop-by-hop or destination option requires">inet6_option_space()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" title="I"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">I</span></a></span>  </div>
</body>
</html>