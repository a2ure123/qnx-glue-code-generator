
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="iofunc_ocb_calloc()" /><meta name="abstract" content="Allocate an iofunc Open Control Block" /><meta name="description" content="Allocate an iofunc Open Control Block" /><meta name="indexterms" content="iofunc_ocb_calloc()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.resmgr/topic/about.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.getting_started/topic/s1_resmgr.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_free.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_t.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="iofunc_ocb_calloc" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>iofunc_ocb_calloc()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="iofunc_ocb_calloc">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" title="I">I</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" title="I"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">I</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">iofunc_ocb_calloc()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>



<div class="body refbody"><p class="shortdesc"><em class="ph i">Allocate an iofunc Open Control Block</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/iofunc.h&gt;

iofunc_ocb_t * iofunc_ocb_calloc( 
                     resmgr_context_t * <var class="keyword varname">ctp</var>,
                     iofunc_attr_t * <var class="keyword varname">attr</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">ctp</var></dt>

<dd class="dd">A pointer to a
  <a class="xref" href="../r/resmgr_context_t.html" title="Context information that's passed between resource-manager functions"><span class="keyword dtype">resmgr_context_t</span></a>
  structure that the resource-manager library uses to pass context information
  between functions.
</dd>




<dt class="dt dlterm"><var class="keyword varname">attr</var></dt>

<dd class="dd">A pointer to a
  <a class="xref" href="iofunc_attr_t.html" title="I/O attribute structure"><span class="keyword dtype">iofunc_attr_t</span></a>
  structure that defines the characteristics of the device that the
  resource manager handles.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">



The <span class="keyword apiname">iofunc_ocb_calloc()</span> function allocates an iofunc OCB.
It has a number of uses:
</p>


<ul class="ul">
<li class="li">It can be used as a helper function to encapsulate
  the allocation of the iofunc OCB, so that your routines don't
  have to know the details of the iofunc OCB structure.
</li>


<li class="li">Because it's in the resource manager shared library,
  you can override this function with your own, allowing
  you to manage an OCB that has additional members, perhaps
  specific to your particular resource manager.
  If you do this, be sure to place the iofunc OCB structure as
  the first element of your extended OCB, and also override the
  <a class="xref" href="iofunc_ocb_free.html" title="Deallocate an iofunc Open Control Block's memory"><span class="keyword apiname">iofunc_ocb_free()</span></a>
  function to release memory.
</li>


<li class="li">Another reason to override <span class="keyword apiname">iofunc_ocb_calloc()</span> might be
  to place limits on the number of OCBs that are in
  existence at any one time; the current function simply allocates
  OCBs until the free store is exhausted.
</li>


</ul>


<div class="note note"><span class="notetitle">Note:</span> 
You should fill in the attribute's mount structure  (i.e., the <var class="keyword varname">attr-&gt;mount</var> pointer)
instead of replacing this function.

<p class="p">
If you specify <var class="keyword varname">ocb_calloc</var> and <var class="keyword varname">ocb_free</var> callouts in the attribute's
mount structure, then you should use the callouts instead of calling the standard 
<span class="keyword apiname">iofunc_ocb_calloc()</span> and <span class="keyword apiname">iofunc_ocb_free()</span> functions.
</p>

</div>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
A pointer to an
<a class="xref" href="iofunc_ocb_t.html" title="Open Control Block structure"><span class="keyword dtype">iofunc_ocb_t</span></a>
OCB structure, or <span class="keyword const">NULL</span> if an error occurred
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a>
is set).
</p>

</div>


<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">ENFILE</span></dt>

<dd class="dd">There are too many open files in the system.
  For <span class="keyword apiname">iofunc_ocb_calloc()</span>, this happens if there isn't enough memory to allocate the OCB;
  if you override this function, your replacement might place further restrictions on the number of OCBs.
</dd>



</dl>

</div>


<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<p class="p">
Override <span class="keyword apiname">iofunc_ocb_calloc()</span>
and <span class="keyword apiname">iofunc_ocb_free()</span> to manage an extended OCB:
</p>


<pre class="pre codeblock">
typedef struct
{
    iofunc_ocb_t    iofuncOCB; /* the OCB used by iofunc_* */
    int             myFlags;
    char            moreOfMyStuff;
}   MyOCBT;

MyOCBT *iofunc_ocb_calloc (resmgr_context_t *ctp, 
                           iofunc_attr_t *attr)
{
    return ((MyOCBT *) calloc (1, sizeof (MyOCBT));
}

void iofunc_ocb_free (MyOCBT *ocb)
{
    free (ocb);
}
</pre>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2046427e257">Safety:</th>
<th class="entry" valign="top" id="d2046427e259">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">Signal handler</td>
<td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">Thread</td>
<td class="entry" valign="top" headers="d2046427e257 d2046427e259 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.resmgr/topic/about.html" title="Writing a Resource Manager">Writing a Resource Manager</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.getting_started/topic/s1_resmgr.html" title="Resource Managers (Getting Started with QNX Neutrino)">Resource Managers (Getting Started with <span class="keyword">QNX Neutrino</span>)</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_free.html" title="Deallocate an iofunc Open Control Block's memory">iofunc_ocb_free()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_t.html" title="Open Control Block structure">iofunc_ocb_t</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-i.html" title="I"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">I</span></a></span>  </div>
</body>
</html>