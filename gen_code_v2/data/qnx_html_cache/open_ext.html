
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="open_ext()" /><meta name="abstract" content="Open a path and set connection flags" /><meta name="description" content="Open a path and set connection flags" /><meta name="indexterms" content="open_ext()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-o.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/chmod.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/close.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/creat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup2.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcntl.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/l/lseek.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/o/openat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/posix_fallocate.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/read.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/w/write.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="open_ext" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>open_ext()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="open_ext">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-o.html" title="O">O</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-o.html" title="O"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">O</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">open_ext()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Open a path and set connection flags</em></p>


<div class="section">
<p class="p">







</p>

</div>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;fcntl.h&gt;

int open_ext( const char *<var class="keyword varname">name</var>,
              int <var class="keyword varname">oflag</var>,
              int <var class="keyword varname">mode</var>,
              int <var class="keyword varname">coflag</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">name</var></dt>

<dd class="dd">The pathname of the file that you want to open.</dd>




<dt class="dt dlterm"><var class="keyword varname">oflag</var></dt>

<dd class="dd">Flags that specify the status and access modes of the file; see
  <a class="xref" href="open.html" title="Open a file"><span class="keyword apiname">open()</span></a>.
</dd>




<dt class="dt dlterm"><var class="keyword varname">mode</var></dt>

<dd class="dd">The access mode that you want to use for a newly created file.
  This argument is used only if you set <span class="keyword const">O_CREAT</span> in <var class="keyword varname">oflag</var>.
  For more information, see the entry for
  <a class="xref" href="../s/stat_struct.html" title="Data structure for information about a file or directory"><span class="keyword dtype">struct stat</span></a>,
  and the description of
  <a class="xref" href="open.html#open__O_CREAT"><span class="keyword const">O_CREAT</span></a>
  the entry for <span class="keyword apiname">open()</span>.
</dd>




<dt class="dt dlterm"><var class="keyword varname">coflag</var></dt>

<dd class="dd">A bitmap of the connection flags you want to set.
  The bits currently defined include:

  <ul class="ul">
  <li class="li"><span class="keyword const">_NTO_COF_CLOEXEC</span> â close the connection if the
    process calls an <span class="keyword apiname">exec*()</span> function to start a new process.
    
  </li>


  <li class="li"><span class="keyword const">_NTO_COF_INSECURE</span> (QNX Neutrino 6.6 or later) â mark the connection as insecure.
    The kernel sets this flag on a connection if the client program replaces its process image
    (e.g., by calling <a class="xref" href="../lib-e.html"><span class="keyword apiname">exec*()</span></a>)
    with a setuid or setgid binary.
    If this flag is set on a connection, calls to
    <a class="xref" href="../m/msgdeliverevent.html" title="Deliver an event through a channel"><span class="keyword apiname">MsgDeliverEvent()</span></a>
    with an event type of <span class="keyword const">SIGEV_MEMORY</span> or <span class="keyword const">SIGEV_THREAD</span>
    fail with an error of <span class="keyword const">EACCES</span>.
    

    <p class="p">
    In QNX Neutrino 7.0 and later,
    the server or client can set this flag if it doesn't trust the program at the other end of the connection,
    but only the kernel can clear it.
    Currently the flag stays set until the connection is detached.
    </p>

  </li>


  <li class="li"><span class="keyword const">_NTO_COF_NOEVENT</span> (QNX Neutrino 7.0 or later) â prevent the server from sending
    <span class="keyword dtype">sigevent</span>s over the channel to the client.
    Only the client can clear this bit.
    
  </li>


  <li class="li"><span class="keyword const">_NTO_COF_REG_EVENTS</span> (QNX Neutrino 7.0.1 or later) â require that the connection
    use only registered events; reject the delivery of any
    <a class="xref" href="../s/sigevent.html" title="Structure that describes an event"><span class="keyword dtype">sigevent</span>s</a>
    that weren't registered as secure events with
    <a class="xref" href="../m/msgregisterevent.html" title="Register a secure event"><span class="keyword apiname">MsgRegisterEvent()</span></a>.
    
    
    
    
    
  </li>


  <li class="li"><span class="keyword const">_NTO_COF_UNREG_EVENTS</span> (QNX Neutrino 7.1 or later) â override the OS requirement
    that all <span class="keyword dtype">sigevent</span>s be registered, allowing this connection to use registered and unregistered events.

    <p class="p">
    You can use
    <a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/p/procnto.html"><span class="keyword cmdname">procnto</span></a>'s
    <span class="keyword option">-U</span> option to allow all processes to use registered and unregistered events;
    <span class="keyword const">_NTO_COF_UNREG_EVENTS</span> lets you do this for a specific connection.
    
    
    
    
    
    </p>


    <div class="note note"><span class="notetitle">Note:</span> 
    Both <span class="keyword const">_NTO_COF_UNREG_EVENTS</span> and <span class="keyword cmdname">procnto</span>'s <span class="keyword option">-U</span> option
    are temporary measures that weaken security. You should use them only while updating your code to use registered events.
    </div>

  </li>


  </ul>


</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">
The <span class="keyword apiname">open_ext()</span> function opens the file named by <var class="keyword varname">path</var>,
creating an open file description that refers to the file, and a file
descriptor that refers to the file description.
It then sets the connection flags.
It lets you combine
<a class="xref" href="open.html" title="Open a file"><span class="keyword apiname">open()</span></a>
and
<a class="xref" href="../c/connectflags.html" title="Modify or query the flags associated with a connection"><span class="keyword apiname">ConnectFlags()</span></a>
in a single operation.
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
A nonnegative integer representing the lowest numbered unused file descriptor. On a file
capable of seeking, the file offset is set to the beginning of the file.
Otherwise, -1 is returned 
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).
</p>


<div class="note note"><span class="notetitle">Note:</span> 
In <span class="keyword">QNX Neutrino</span>, the returned file descriptor is a connection ID
(or <em class="ph i">coid</em>) as used by the <span class="keyword">QNX Neutrino</span>-specific functions (e.g.,
<a class="xref" href="../m/msgsend.html" title="Send a message to a channel"><span class="keyword apiname">MsgSend()</span></a>).
</div>


</div>


<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">EACCES</span></dt>

<dd class="dd">Search permission is denied on a component of the <var class="keyword varname">path</var> prefix, or the
  file exists and the permissions specified by <var class="keyword varname">oflag</var>
  are denied, or the file doesn't exist and write permission is denied
  for the parent directory of the file to be created.
</dd>




<dt class="dt dlterm"><span class="keyword const">EBADFSYS</span></dt>

<dd class="dd">While attempting to open the named file, either the file itself or a
  component of the path prefix was found to be corrupted.
  A system failureâfrom which no automatic recovery is possibleâoccurred while
  the file was being written to, or while the directory was 
  being updated. You'll need to invoke appropriate 
  systems-administration procedures to correct this situation before proceeding.
</dd>




<dt class="dt dlterm"><span class="keyword const">EBUSY</span></dt>

<dd class="dd">File access was denied due to a conflicting open (see
  <a class="xref" href="../s/sopen.html" title="Open a file for shared access"><span class="keyword apiname">sopen()</span></a>).
</dd>




<dt class="dt dlterm"><span class="keyword const">EEXIST</span></dt>

<dd class="dd">The <span class="keyword const">O_CREAT</span> and <span class="keyword const">O_EXCL</span> flags are set, and the named file exists.</dd>




<dt class="dt dlterm"><span class="keyword const">EINTR</span></dt>

<dd class="dd">The operation was interrupted by a signal.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">The requested synchronized modes (<span class="keyword const">O_SYNC</span>, <span class="keyword const">O_DSYNC</span>, <span class="keyword const">O_RSYNC</span>)
  aren't supported (i.e, <span class="keyword const">IOFUNC_PC_SYNC_IO</span> isn't set
  in the device's mount configuration).
</dd>




<dt class="dt dlterm"><span class="keyword const">EISDIR</span></dt>

<dd class="dd">The named file is a directory and the <var class="keyword varname">oflag</var>
  argument specifies write-only or read/write access, or includes <span class="keyword const">O_CREAT</span> without
  <span class="keyword const">O_DIRECTORY</span>.
</dd>




<dt class="dt dlterm"><span class="keyword const">ELOOP</span></dt>

<dd class="dd">There are too many levels of symbolic links or prefixes, including these cases:

  <ul class="ul">
  <li class="li">The flags include <span class="keyword const">O_NOFOLLOW</span>, and the last component of the path is a symbolic link.</li>


  <li class="li">The flags include <span class="keyword const">O_NOSYMLINK</span>, and any component of the path is a symbolic link.</li>


  </ul>

</dd>




<dt class="dt dlterm"><span class="keyword const">EMFILE</span></dt>

<dd class="dd">All file descriptors available to the process are currently open.</dd>




<dt class="dt dlterm"><span class="keyword const">ENAMETOOLONG</span></dt>

<dd class="dd">The length of the <var class="keyword varname">name</var> string exceeds <span class="keyword const">PATH_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENFILE</span></dt>

<dd class="dd">Too many files are currently open in the system.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOENT</span></dt>

<dd class="dd">The <span class="keyword const">O_CREAT</span> flag isn't set, and the named file doesn't exist; 
  or <span class="keyword const">O_CREAT</span> is set and either the path prefix doesn't exist
  or the <var class="keyword varname">path</var> argument points to an empty string.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSPC</span></dt>

<dd class="dd">In the directory or filesystem that would contain the new file, there's not enough space available to create a new file 
or the maximum limit of files has been reached.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">This function isn't implemented for the filesystem underlying the specified path.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOTDIR</span></dt>

<dd class="dd">One of the following occurred:

  <ul class="ul">
  <li class="li">A component of the path prefix names an existing file that is neither a directory nor a symbolic link
    to a directory.
  </li>


  <li class="li"><span class="keyword const">O_CREAT</span> and <span class="keyword const">O_EXCL</span> aren't specified, the <var class="keyword varname">path</var> argument
    contains at least one non-slash character and ends with one or more trailing slash characters,
    and the last pathname component names an existing file that is neither a directory nor a symbolic link
    to a directory
  </li>


  <li class="li"><span class="keyword const">O_DIRECTORY</span> was specified and the <var class="keyword varname">path</var> argument resolves to a
    non-directory file.
  </li>


  </ul>

</dd>




<dt class="dt dlterm"><span class="keyword const">ENOTSUP</span></dt>

<dd class="dd">The <var class="keyword varname">oflag</var> argument includes <span class="keyword const">O_CREAT</span> and <span class="keyword const">O_DIRECTORY</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENXIO</span></dt>

<dd class="dd">One of the following is true:

  <ul class="ul">
  <li class="li">The <span class="keyword const">O_NONBLOCK</span> flag is set, the named file is a FIFO,
    <span class="keyword const">O_WRONLY</span> is set, and no process has the file open for reading.
  </li>


  <li class="li">The media associated with the file (e.g., a CD) has been removed.</li>


  </ul>

</dd>




<dt class="dt dlterm"><span class="keyword const">EOVERFLOW</span></dt>

<dd class="dd">The named file is a regular file and its size can't be
  represented correctly in an object of type <span class="keyword dtype">off_t</span>.
</dd>


  

<dt class="dt dlterm"><span class="keyword const">EPERM</span></dt>

<dd class="dd">The process doesn't have the necessary permissions to connect.</dd>




<dt class="dt dlterm"><span class="keyword const">EROFS</span></dt>

<dd class="dd">The named file resides on a read-only filesystem and either
  <span class="keyword const">O_WRONLY</span>, <span class="keyword const">O_RDWR</span>, <span class="keyword const">O_CREAT</span>
  (if the file doesn't exist), or <span class="keyword const">O_TRUNC</span> is set in the
  <var class="keyword varname">oflag</var> argument.
</dd>




<dt class="dt dlterm"><span class="keyword const">ETXTBSY</span></dt>

<dd class="dd">The file is a pure procedure (shared text) file that's currently being executed
  and <var class="keyword varname">oflag</var> is <span class="keyword const">O_WRONLY</span> or <span class="keyword const">O_RDWR</span>.
</dd>



</dl>


</div>




<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2299648e812">Safety:</th>
<th class="entry" valign="top" id="d2299648e814">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">Signal handler</td>
<td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">Thread</td>
<td class="entry" valign="top" headers="d2299648e812 d2299648e814 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>



<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/chmod.html" title="Change the permissions for a file">chmod()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/close.html" title="Close a file">close()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/creat.html" title="Create and open a file (low-level)">creat(), creat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup.html" title="Duplicate a file descriptor">dup()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup2.html" title="Duplicate a file descriptor, specifying the new descriptor">dup2()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" title="Thread-local error variable">errno</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcntl.html" title="Provide control over an open file">fcntl()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" title="Get file information, given a file description">fstat(), fstat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/l/lseek.html" title="Set the current read/write file offset">lseek(), lseek64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" title="Open a file">open(), open64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/o/openat.html" title="Open a file at a given location">openat()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/posix_fallocate.html" title="Allocate space for a file on the filesystem">posix_fallocate(), posix_fallocate64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/read.html" title="Read bytes from a file">read()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/w/write.html" title="Write bytes to a file">write()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-o.html" title="O"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">O</span></a></span>  </div>
</body>
</html>