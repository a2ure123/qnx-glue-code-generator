
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="pthread_spin_init()" /><meta name="abstract" content="Initialize a thread spinlock" /><meta name="description" content="Initialize a thread spinlock" /><meta name="indexterms" content="pthread_spin_init()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_destroy.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_lock.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_trylock.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_unlock.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="pthread_spin_init" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>pthread_spin_init()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="pthread_spin_init">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P">P</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">P</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">pthread_spin_init()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Initialize a thread spinlock</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;pthread.h&gt;

int pthread_spin_init( pthread_spinlock_t * <var class="keyword varname">spinner</var>,
                       int <var class="keyword varname">pshared</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">spinner</var></dt>

<dd class="dd">A pointer to the <span class="keyword dtype">pthread_spinlock_t</span> object that you
  want to initialize.

  <div class="note note"><span class="notetitle">Note:</span> 
  It's always safe, and typically faster, to assure that <var class="keyword varname">spinner</var> is 32-bit aligned.
  </div>

</dd>




<dt class="dt dlterm"><var class="keyword varname">pshared</var></dt>

<dd class="dd">The value that you want to use for the process-shared attribute of the spinlock.
  The possible values are:

  <ul class="ul">
  <li class="li"><span class="keyword const">PTHREAD_PROCESS_SHARED</span> â the spinlock may be
    operated on by any thread that has access to the memory where the
    spinlock is allocated, even if it's allocated in memory that's shared
    by multiple processes.
    
  </li>


  <li class="li"><span class="keyword const">PTHREAD_PROCESS_PRIVATE</span> â the spinlock can be
    operated on only by threads created within the same process as the
    thread that initialized the spinlock.
    If threads of differing processes attempt to operate on such a spinlock,
    the behavior is undefined.
    
  </li>


  </ul>

</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">



The <span class="keyword apiname">pthread_spin_init()</span> function allocates the resources required
for the thread spinlock <var class="keyword varname">spinner</var>, and initializes
<var class="keyword varname">spinner</var> to an unlocked state.
</p>


<p class="p">
Any thread that can access the memory where <var class="keyword varname">spinner</var> is allocated
can operate on the spinlock.
</p>


<p class="p">
Results are undefined if you call <span class="keyword apiname">pthread_spin_init()</span> on a
<var class="keyword varname">spinner</var> that's already initialized, or if you try to use a
spinlock that hasn't been initialized.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
Zero on success, or an error number to indicate the error.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EAGAIN</span></dt>

<dd class="dd">The system doesn't have the resources required to initialize a new spinlock.</dd>




<dt class="dt dlterm"><span class="keyword const">EBUSY</span></dt>

<dd class="dd">The process spinlock, <var class="keyword varname">spinner</var>, is in use by another thread and can't be initialized.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">Invalid <span class="keyword dtype">pthread_spinlock_t</span> object <var class="keyword varname">spinner</var>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOMEM</span></dt>

<dd class="dd">The system doesn't have enough free memory to create the new spinlock.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2455890e243">Safety:</th>
<th class="entry" valign="top" id="d2455890e245">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">Signal handler</td>
<td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">Thread</td>
<td class="entry" valign="top" headers="d2455890e243 d2455890e245 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_destroy.html" title="Destroy a thread spinlock">pthread_spin_destroy()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_lock.html" title="Lock a thread spinlock">pthread_spin_lock()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_trylock.html" title="Try to lock a thread spinlock">pthread_spin_trylock()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_spin_unlock.html" title="Unlock a thread spinlock">pthread_spin_unlock()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">P</span></a></span>  </div>
</body>
</html>