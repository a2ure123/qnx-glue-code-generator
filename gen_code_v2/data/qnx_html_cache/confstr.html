
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="confstr()" /><meta name="abstract" content="Get configuration-defined string values" /><meta name="description" content="Get configuration-defined string values" /><meta name="indexterms" content="confstr()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.user_guide/topic/environment_ConfigStrings.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pathconf.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/procmgr_ability.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/sysconf.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.utilities/topic/c/confstr.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.utilities/topic/g/getconf.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.utilities/topic/s/setconf.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="confstr" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>confstr()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="confstr">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C">C</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">confstr()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Get configuration-defined string values</em></p>


<div class="section">





</div>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;unistd.h&gt;

size_t confstr( int <var class="keyword varname">name</var>, 
                char * <var class="keyword varname">buf</var>,
                size_t <var class="keyword varname">len</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">name</var></dt>

<dd class="dd">The system variable to query; see below.</dd>




<dt class="dt dlterm"><var class="keyword varname">buf</var></dt>

<dd class="dd">A pointer to a buffer in which the function can store the value of the system variable.
</dd>




<dt class="dt dlterm"><var class="keyword varname">len</var></dt>

<dd class="dd">The length of the buffer, in bytes.</dd>



</dl>

</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">
The <span class="keyword apiname">confstr()</span> function lets applications get or (as a <span class="keyword">QNX Neutrino</span> extension)
set configuration-defined string values.
This is similar to the 
<a class="xref" href="../s/sysconf.html" title="Return the value of a configurable system limit or option"><span class="keyword apiname">sysconf()</span></a> 
function, but you use it to get string values, rather than numeric values.
By default, the function queries and returns values in the system.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
In order to set a configuration string, your process must have the
<span class="keyword const">PROCMGR_AID_CONFSET</span> ability enabled (see 
<a class="xref" href="../p/procmgr_ability.html" title="Control a process's ability to perform certain operations"><span class="keyword apiname">procmgr_ability()</span></a>
for more information) and your code must follow the steps given in 
<span class="q">&#147;<a class="xref" href="#confstr__setting">Setting configuration values</a>&#148;</span> below.

</div>


<p class="p">
The <var class="keyword varname">name</var> argument represents the system variable to query.  
The values are defined in <span class="ph filepath">&lt;confname.h&gt;</span>; at
least the following <var class="keyword varname">name</var> values are valid:
</p>




<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">_CS_ARCHITECTURE</span></dt>

<dd class="dd">The name of the instruction set architecture for this node's CPU(s).
  
  
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_CONFIG_PATH</span></dt>

<dd class="dd">A colon-separated list of directories to search for configuration files.
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_DOMAIN</span></dt>

<dd class="dd">The domain name.
  
  
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_GRAPHICS</span></dt>

<dd class="dd">The graphics redirection.
  
  
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_HOSTNAME</span></dt>

<dd class="dd">The name of this node in the network.
  
  

  <div class="note note"><span class="notetitle">Note:</span> 
  
  A hostname can consist only of letters, numbers, and hyphens, and
  must not start or end with a hyphen.
  For more information, see <cite class="cite">RFC 952</cite>.
  </div>


</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_HW_PROVIDER</span></dt>

<dd class="dd">The name of the hardware manufacturer.
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_HW_SERIAL</span></dt>

<dd class="dd">The serial number associated with the hardware.
  
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_LIBPATH</span></dt>

<dd class="dd">A value similar to the <span class="keyword envar">LD_LIBRARY_PATH</span> environment 
  variable that finds all standard libraries.
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_LOCALE</span></dt>

<dd class="dd">The name of the current locale.
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_MACHINE</span></dt>

<dd class="dd">This node's hardware type.
  
  
</dd>



  
    <dt class="dt dlterm"><span class="keyword const">_CS_PAMCONF</span></dt>

    <dd class="dd">The search path for <a class="xref" href="../../../com.qnx.doc.security.system/topic/manual/pam.html">PAM</a> configuration files.
      
      
    </dd>

  
  
  
    <dt class="dt dlterm"><span class="keyword const">_CS_PAMLIB</span></dt>

    <dd class="dd">The search path for <a class="xref" href="../../../com.qnx.doc.security.system/topic/manual/pam.html">PAM</a> modules. 
      
      
    </dd>

  
  


<dt class="dt dlterm"><span class="keyword const">_CS_PATH</span></dt>

<dd class="dd">A value similar to the <span class="keyword envar">PATH</span> environment variable that
  finds all standard utilities.
  
  
</dd>






<dt class="dt dlterm"><span class="keyword const">_CS_RELEASE</span></dt>

<dd class="dd">The current OS release level.
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_RESOLVE</span></dt>

<dd class="dd">The contents of the <span class="ph filepath">resolv.conf</span> file, excluding the
  domain name.
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_SRPC_DOMAIN</span></dt>

<dd class="dd">The secure RPC domain.
  
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_SYSNAME</span></dt>

<dd class="dd">The operating system name.
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_TIMEZONE</span></dt>

<dd class="dd">The time zone string (<span class="keyword envar">TZ</span> style).
  
  
</dd>




<dt class="dt dlterm"><span class="keyword const">_CS_V7_ENV</span></dt>

<dd class="dd">A space-separated list of environment variables that must be set for the <span class="keyword">QNX Neutrino</span> to operate
  in a POSIX-conformant manner. For example, if this string contains <samp class="ph codeph">POSIXLY_CORRECT</samp>, then your system will act
  in a POSIX-conformant manner if the <span class="keyword envar">POSIXLY_CORRECT</span> environment variable is set.
  
  
</dd>






<dt class="dt dlterm"><span class="keyword const">_CS_VERSION</span></dt>

<dd class="dd">The current OS version number.
  
  
</dd>



</dl>




<p class="p">
The configuration-defined value is returned in the buffer pointed to by 
<var class="keyword varname">buf</var>, and will be less than or equal to <var class="keyword varname">len</var> bytes long, including
the terminating <span class="keyword const">NULL</span>.
If the value, including the terminating <span class="keyword const">NULL</span>, is greater than <var class="keyword varname">len</var>
bytes long, it's truncated to
<var class="keyword varname">len</var> - 1 bytes and terminated with a <span class="keyword const">NULL</span> character.
</p>


<p class="p">
To find out the length of a configuration-defined value, call
<span class="keyword apiname">confstr()</span> with <var class="keyword varname">buf</var> set to <span class="keyword const">NULL</span>
and <var class="keyword varname">len</var> set to 0.
</p>


<h2 class="sectiontitle" id="confstr__setting">Setting configuration values</h2>

<p class="p">
As a <span class="keyword">QNX Neutrino</span> extension, you can set a configuration value, as follows:
</p>


<ol class="ol">
<li class="li">OR the name of the value (e.g., <span class="keyword const">_CS_HOSTNAME</span>) with <span class="keyword const">_CS_SET</span>.
  
</li>


<li class="li">Put the new value in a <span class="keyword const">NULL</span>-terminated string.</li>


<li class="li">Set the value of <var class="keyword varname">len</var> to 0.</li>


</ol>


<div class="p">
For convenience, <span class="ph filepath">&lt;confname.h&gt;</span> defines <var class="keyword varname">name</var> values 
specifically for setting certain system variables, saving you from manually performing the first step
listed above. These values include:
<ul class="ul">
    <li class="li"><span class="keyword const">_CS_SET_DOMAIN</span></li>

    <li class="li"><span class="keyword const">_CS_SET_RESOLVE</span></li>

    <li class="li"><span class="keyword const">_CS_SET_TIMEZONE</span></li>

    <li class="li"><span class="keyword const">_CS_SET_LOCALE</span></li>

    <li class="li"><span class="keyword const">_CS_SET_GRAPHICS</span></li>

</ul>

</div>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
If you're getting the value:
</p>


<ul class="ul">
<li class="li">If <var class="keyword varname">name</var> has a configuration-defined value, <span class="keyword apiname">confstr()</span> returns
  the size of buffer that would be needed to hold the entire value, including the terminating null.
  If this size is greater than <var class="keyword varname">len</var>, the string returned in <var class="keyword varname">buf</var> is truncated.
</li>


<li class="li">If <var class="keyword varname">name</var> is invalid, <span class="keyword apiname">confstr()</span> returns 0 and sets
  <a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a>
  to indicate the error.
</li>


<li class="li">If <var class="keyword varname">name</var> doesn't have a configuration-defined value, <span class="keyword apiname">confstr()</span>
  returns 0 and leaves <var class="keyword varname">errno</var> unchanged.
</li>


</ul>


<p class="p">
If you're setting a value and an error occurs, <span class="keyword apiname">confstr()</span> returns 0
and sets <var class="keyword varname">errno</var>.
Any other value indicates success.
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">The <var class="keyword varname">name</var> argument isn't a valid configuration-defined value.</dd>




<dt class="dt dlterm"><span class="keyword const">EPERM</span></dt>

<dd class="dd">The calling process doesn't have the required permission; see
  <a class="xref" href="../p/procmgr_ability.html" title="Control a process's ability to perform certain operations"><span class="keyword apiname">procmgr_ability()</span></a>.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<p class="p">
Print information similar to that returned by the 
<a class="xref" href="../u/uname.html" title="Get information about the operating system"><span class="keyword apiname">uname()</span></a> function:
</p>


<pre class="pre codeblock">
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;limits.h&gt;

#define BUFF_SIZE (256 + 1)

int main( void )
{
    char buff[BUFF_SIZE];

    if( confstr( _CS_SYSNAME, buff, BUFF_SIZE ) &gt; 0 ) {
        printf( "System name: %s\n", buff );
    }
    
    if( confstr( _CS_HOSTNAME, buff, BUFF_SIZE ) &gt; 0 ) {
        printf( "Host name: %s\n", buff );
    }
    
    if( confstr( _CS_RELEASE, buff, BUFF_SIZE ) &gt; 0 ) {
        printf( "Release: %s\n", buff );
    }
    
    if( confstr( _CS_VERSION, buff, BUFF_SIZE ) &gt; 0 ) {
        printf( "Version: %s\n", buff );
    }
    
    if( confstr( _CS_MACHINE, buff, BUFF_SIZE ) &gt; 0 ) {
        printf( "Machine: %s\n", buff );
    }

    if( confstr( _CS_SET | _CS_HOSTNAME, "myhostname", 0 ) != 0 ) {
        printf( "Hostname set to: %s\n", "myhostname" );
    }

    return 0;
}
</pre>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d1310495e904">Safety:</th>
<th class="entry" valign="top" id="d1310495e906">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">Cancellation point</td>
<td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">Signal handler</td>
<td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">Thread</td>
<td class="entry" valign="top" headers="d1310495e904 d1310495e906 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>



</div>



<div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.user_guide/topic/environment_ConfigStrings.html" title="Configuration strings (QNX Neutrino User's Guide)">Configuration strings (<span class="keyword">QNX Neutrino</span> User's Guide)</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pathconf.html" title="Return the value of a configurable limit">pathconf()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/procmgr_ability.html" title="Control a process's ability to perform certain operations">procmgr_ability()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/sysconf.html" title="Return the value of a configurable system limit or option">sysconf()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.utilities/topic/c/confstr.html" title="confstr (Utilities Reference)">confstr (Utilities Reference)</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.utilities/topic/g/getconf.html" title="getconf (Utilities Reference)">getconf (Utilities Reference)</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.utilities/topic/s/setconf.html" title="setconf (Utilities Reference)">setconf (Utilities Reference)</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </div>
</body>
</html>