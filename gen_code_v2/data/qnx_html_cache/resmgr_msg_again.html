
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="resmgr_msg_again()" /><meta name="abstract" content="Process a message again in a resource manager" /><meta name="description" content="Process a message again in a resource manager" /><meta name="indexterms" content="resmgr_msg_again()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.resmgr/topic/about.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msgcurrent.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msginfo.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msgread.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_context_t.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="resmgr_msg_again" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>resmgr_msg_again()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="resmgr_msg_again">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R">R</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">R</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">resmgr_msg_again()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Process a message again in a resource manager</em></p>


<div class="section">

<p class="p">


</p>

</div>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/iofunc.h&gt;
#include &lt;sys/resmgr.h&gt;

int resmgr_msg_again( resmgr_context_t *<var class="keyword varname">ctp</var>,
                      int <var class="keyword varname">rcvid</var>);
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">ctp</var></dt>

<dd class="dd">A pointer to a
  <a class="xref" href="resmgr_context_t.html" title="Context information that's passed between resource-manager functions"><span class="keyword dtype">resmgr_context_t</span></a>
  structure that the resource-manager library uses to pass context information between functions.
</dd>




<dt class="dt dlterm"><var class="keyword varname">rcvid</var></dt>

<dd class="dd">The receive ID of the message that you want to process again.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">
The <span class="keyword apiname">resmgr_msg_again()</span> function reprocesses the message
corresponding to the given <var class="keyword varname">rcvid</var>.
It does this by:
</p>


<ul class="ul">
<li class="li">calling
  <a class="xref" href="../m/msginfo.html" title="Get additional information about a message"><span class="keyword apiname">MsgInfo()</span></a>
  and
  <a class="xref" href="../m/msgread.html" title="Read data from a message"><span class="keyword apiname">MsgRead()</span></a>
  to refresh the <span class="keyword dtype">resmgr_context_t</span> structure as if it had just arrived
</li>


<li class="li">calling
  <a class="xref" href="../m/msgcurrent.html" title="Resume processing of a message"><span class="keyword apiname">MsgCurrent()</span></a>
  to adjust your server thread's priority to that of the blocked client
</li>


<li class="li">processing the message as if it had just arrived</li>


</ul>


<p class="p">
You use this function if your resource manager can't process a message right away.
For example, if a read operation is blocked, your io_read handler would
save the <var class="keyword varname">rcvid</var> of the request, and then return
<span class="keyword const">_RESMGR_NOREPLY</span>, leaving the client blocked.
Later, when the resource manager can handle the request, it can call
<span class="keyword apiname">resmgr_msg_again()</span> to reprocess the message.
</p>


  <div class="cautiontitle">CAUTION:</div><div class="note caution"><p class="p">The <span class="keyword apiname">resmgr_msg_again()</span> function overwrites the <var class="keyword varname">ctp</var> with
          data and state information of the message you want to process again. If you use this
          function in any callback other than a pulse handler, then further processing behaviour can
          be undefined. To proceed without resulting in undefined behaviour, provide a clean
            <var class="keyword varname">ctp</var> allocated with a call to <a class="xref" href="../d/dispatch_context_alloc.html" title="Return a dispatch context"><span class="keyword apiname">dispatch_context_alloc()</span></a>; then free the dispatch context by
          calling <a class="xref" href="../d/dispatch_context_free.html" title="Free a dispatch context"><span class="keyword apiname">dispatch_context_free()</span></a> with the new
          <var class="keyword varname">ctp</var>.</p>

    <p class="p">Furthermore, the function processes the new message in the context of the current thread.
     If the current thread holds any mutexes or other synchronization objects that are not relockable
     by the calling thread, this can result in self-deadlock or other failures.</p>
</div>

</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm">-1</dt>

<dd class="dd">Failure.</dd>




<dt class="dt dlterm">0</dt>

<dd class="dd">Success.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EFAULT</span></dt>

<dd class="dd">A fault occurred when the kernel tried to access the buffers provided.</dd>




<dt class="dt dlterm"><span class="keyword const">ESRCH</span></dt>

<dd class="dd">The thread indicated by <var class="keyword varname">rcvid</var> doesn't exist, has had its
  connection detached, or isn't in either <span class="keyword const">STATE_REPLY</span> or
  <span class="keyword const">STATE_NET_REPLY</span>, or it isn't blocked on the connection
  associated with the <var class="keyword varname">rcvid</var>.
</dd>




<dt class="dt dlterm"><span class="keyword const">ESRVRFAULT</span></dt>

<dd class="dd">The receive side of a message transfer encountered a memory fault accessing the receive/reply buffer.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2516709e307">Safety:</th>
<th class="entry" valign="top" id="d2516709e309">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">Signal handler</td>
<td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">Thread</td>
<td class="entry" valign="top" headers="d2516709e307 d2516709e309 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>


<div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.resmgr/topic/about.html" title="Writing a Resource Manager">Writing a Resource Manager</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msgcurrent.html" title="Resume processing of a message">MsgCurrent(), MsgCurrent_r()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msginfo.html" title="Get additional information about a message">MsgInfo(), MsgInfo_r()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/msgread.html" title="Read data from a message">MsgRead(), MsgRead_r()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_context_t.html" title="Context information that's passed between resource-manager functions">resmgr_context_t</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">R</span></a></span>  </div>
</body>
</html>