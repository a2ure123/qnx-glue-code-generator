
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="lseek(), lseek64()" /><meta name="abstract" content="Set the current read/write file offset" /><meta name="description" content="Set the current read/write file offset" /><meta name="indexterms" content="lseek(), lseek64()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-l.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/close.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/creat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup2.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execl.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execle.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execlp.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execlpe.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execv.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execve.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execvp.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execvpe.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcntl.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fileno.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/isatty.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/read.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/sopen.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/u/umask.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/w/write.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="lseek" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>lseek(), lseek64()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="lseek">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-l.html" title="L">L</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-l.html" title="L"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">L</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">lseek()</span>, <span class="keyword apiname">lseek64()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Set the current read/write file offset</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;

off_t lseek( int <var class="keyword varname">filedes</var>, 
             off_t <var class="keyword varname">offset</var>,
             int <var class="keyword varname">whence</var> );

off64_t lseek64( int <var class="keyword varname">filedes</var>, 
               off64_t <var class="keyword varname">offset</var>,
               int <var class="keyword varname">whence</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">filedes</var></dt>

<dd class="dd">The file descriptor of the file whose position you want to set.</dd>




<dt class="dt dlterm"><var class="keyword varname">offset</var></dt>

<dd class="dd">The relative offset from the file position determined by the
  <var class="keyword varname">whence</var> argument.
</dd>




<dt class="dt dlterm"><var class="keyword varname">whence</var></dt>

<dd class="dd">The position in the file.
  The possible values (defined in <span class="ph filepath">&lt;unistd.h&gt;</span>) are:

  <dl class="dl">
  
  <dt class="dt dlterm"><span class="keyword const">SEEK_CUR</span></dt>

  <dd class="dd">The new file position is computed relative to the current file
    position. The value of <var class="keyword varname">offset</var> may be positive, negative or zero.
    
  </dd>

  

  
  <dt class="dt dlterm"><span class="keyword const">SEEK_END</span></dt>

  <dd class="dd">The new file position is computed relative to the end of the file.
    
  </dd>

  

  
  <dt class="dt dlterm"><span class="keyword const">SEEK_SET</span></dt>

  <dd class="dd">The new file position is computed relative to the start of the file.
    The value of <var class="keyword varname">offset</var> must not be negative.
    
  </dd>

  

  </dl>

</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">



The <span class="keyword apiname">lseek()</span> and <span class="keyword apiname">lseek64()</span> functions set the current file position
(i.e., the location at which the next read or write will start) for the file descriptor specified by
<var class="keyword varname">filedes</var>.
The <span class="keyword apiname">lseek64()</span> function is a large-file support version of <span class="keyword apiname">lseek()</span>.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
In QNX Neutrino 6.6 or later, the large-file support functions and data types
appear in the name space only if you define <span class="keyword const">_LARGEFILE64_SOURCE</span> when you compile your code.
For more information, see
<span class="q">&#147;<a class="xref" href="../summary.html#summary__CLASSIFICATION">Classification</a>&#148;</span>
in What's in a Function Description?
</div>


<p class="p">
An error occurs if the requested file position is before the start of the file.
</p>


<p class="p">
If the requested file position is beyond the end of the file and data is
written at this point, subsequent reads of data in the gap will return bytes 
whose value is equal to zero (<samp class="ph codeph">'\0'</samp>) until data is actually
written into the gap.
</p>


<p class="p">
These functions don't extend the size of a file
(see <a class="xref" href="../f/ftruncate.html" title="Truncate a file"><span class="keyword apiname">ftruncate()</span></a>).
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
The current file position, with 0 indicating the start of the
file, or -1 if an error occurs
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a>
is set).
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">EBADF</span></dt>

<dd class="dd">The <var class="keyword varname">filedes</var> argument isn't a valid file descriptor.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">The <var class="keyword varname">whence</var> argument isn't a proper value, or the resulting
  file offset is invalid.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">The underlying device is incapable of seeking.</dd>




<dt class="dt dlterm"><span class="keyword const">EOVERFLOW</span></dt>

<dd class="dd">The resulting file offset is a value that can't be represented
  correctly in an object of type <span class="keyword dtype">off_t</span>.
</dd>




<dt class="dt dlterm"><span class="keyword const">ESPIPE</span></dt>

<dd class="dd">The <var class="keyword varname">filedes</var> argument is associated with a pipe, FIFO, or socket.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<p class="p">
Using the <span class="keyword apiname">lseek()</span> function, you can get the current file position.
You can then use this value with another call to
<span class="keyword apiname">lseek()</span> to reset the file position:
</p>


<pre class="pre codeblock">
off_t file_posn;
int filedes;

/* get current file position */
file_posn = lseek( filedes, 0L, SEEK_CUR );

â¦

/* return to previous file position */
file_posn = lseek( filedes, file_posn, SEEK_SET );
</pre>


<p class="p">
If all records in the file are the same size, the position of the 
<var class="keyword varname">n</var>th record can be calculated and read like this:
</p>


<pre class="pre codeblock">
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;

int read_record( int filedes, long rec_numb, 
                 int rec_size, char *buffer )
{
    if( lseek( filedes, rec_numb * rec_size, 
               SEEK_SET ) == -1L ) {
        return -1;
    }

    return( read( filedes, buffer, rec_size ) );
}
</pre>


<p class="p">
The <span class="keyword apiname">read_record()</span> function in this example assumes records are
numbered starting with zero, and that <var class="keyword varname">rec_size</var> contains the size
of a record in the file, including any record-separator characters.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><span class="keyword apiname">lseek()</span> is
<a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a>;
<span class="keyword apiname">lseek64()</span> is
<a class="xref" href="../summary.html#summary__CLASSIFICATION">Large-file support</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2129325e394">Safety:</th>
<th class="entry" valign="top" id="d2129325e396">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">Signal handler</td>
<td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">Thread</td>
<td class="entry" valign="top" headers="d2129325e394 d2129325e396 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/close.html" title="Close a file">close()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/creat.html" title="Create and open a file (low-level)">creat(), creat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup.html" title="Duplicate a file descriptor">dup()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/d/dup2.html" title="Duplicate a file descriptor, specifying the new descriptor">dup2()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" title="Thread-local error variable">errno</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execl.html" title="Execute a file">execl()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execle.html" title="Execute a file">execle()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execlp.html" title="Execute a file">execlp()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execlpe.html" title="Execute a file">execlpe()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execv.html" title="Execute a file">execv()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execve.html" title="Execute a file">execve()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execvp.html" title="Execute a file">execvp()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/execvpe.html" title="Execute a file">execvpe()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcntl.html" title="Provide control over an open file">fcntl()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fileno.html" title="Return the file descriptor for a stream">fileno()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fstat.html" title="Get file information, given a file description">fstat(), fstat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/isatty.html" title="Test to see if a file descriptor is associated with a terminal">isatty()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" title="Open a file">open(), open64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/read.html" title="Read bytes from a file">read()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/sopen.html" title="Open a file for shared access">sopen()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" title="Get information about a file or directory, given a path">stat(), stat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/u/umask.html" title="Set the file-mode creation mask for the process">umask()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/w/write.html" title="Write bytes to a file">write()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-l.html" title="L"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">L</span></a></span>  </div>
</body>
</html>