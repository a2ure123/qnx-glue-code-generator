
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="ConnectFlags(), ConnectFlags_r()" /><meta name="abstract" content="Modify or query the flags associated with a connection" /><meta name="description" content="Modify or query the flags associated with a connection" /><meta name="indexterms" content="ConnectFlags(), ConnectFlags_r()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/connectattach.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/connectserverinfo.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcntl.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open_ext.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/procmgr_ability.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="connectflags" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>ConnectFlags(), ConnectFlags_r()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="connectflags">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C">C</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">ConnectFlags()</span>, <span class="keyword apiname">ConnectFlags_r()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Modify or query the flags associated with a connection</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/neutrino.h&gt;

int ConnectFlags( pid_t <var class="keyword varname">pid</var>,
                  int <var class="keyword varname">coid</var>, 
                  unsigned <var class="keyword varname">mask</var>, 
                  unsigned <var class="keyword varname">bits</var> );

int ConnectFlags_r( pid_t <var class="keyword varname">pid</var>,
                    int <var class="keyword varname">coid</var>, 
                    unsigned <var class="keyword varname">mask</var>, 
                    unsigned <var class="keyword varname">bits</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">pid</var></dt>

<dd class="dd">The ID of the process that the connection ID belongs to, or 0 for the current process.</dd>




<dt class="dt dlterm"><var class="keyword varname">coid</var></dt>

<dd class="dd">The ID of the connection whose flags you want to modify.</dd>




<dt class="dt dlterm"><var class="keyword varname">mask</var></dt>

<dd class="dd">A bitmap that indicates which bits are to be modified in the flags.
  The bits currently defined include:

  <ul class="ul">
  <li class="li"><span class="keyword const">_NTO_COF_CLOEXEC</span> â close the connection if the
    process calls an <span class="keyword apiname">exec*()</span> function to start a new process.
    
  </li>


  <li class="li"><span class="keyword const">_NTO_COF_INSECURE</span> (QNX Neutrino 6.6 or later) â mark the connection as insecure.
    The kernel sets this flag on a connection if the client program replaces its process image
    (e.g., by calling <a class="xref" href="../lib-e.html"><span class="keyword apiname">exec*()</span></a>)
    with a setuid or setgid binary.
    If this flag is set on a connection, calls to
    <a class="xref" href="../m/msgdeliverevent.html" title="Deliver an event through a channel"><span class="keyword apiname">MsgDeliverEvent()</span></a>
    with an event type of <span class="keyword const">SIGEV_MEMORY</span> or <span class="keyword const">SIGEV_THREAD</span>
    fail with an error of <span class="keyword const">EACCES</span>.
    

    <p class="p">
    In QNX Neutrino 7.0 and later,
    the server or client can set this flag if it doesn't trust the program at the other end of the connection,
    but only the kernel can clear it.
    Currently the flag stays set until the connection is detached.
    </p>

  </li>


  <li class="li"><span class="keyword const">_NTO_COF_NOEVENT</span> (QNX Neutrino 7.0 or later) â prevent the server from sending
    <span class="keyword dtype">sigevent</span>s over the channel to the client.
    Only the client can clear this bit.
    
  </li>


  <li class="li"><span class="keyword const">_NTO_COF_NOSHARE</span> (QNX Neutrino 7.1 or later) â this is an internal flag.
    
    
  </li>


  <li class="li"><span class="keyword const">_NTO_COF_REG_EVENTS</span> (QNX Neutrino 7.0.1 or later; you can use <span class="keyword apiname">ConnectFlags()</span>
    to set it in QNX Neutrino 7.1 or later) â reject the delivery of any
    <a class="xref" href="../s/sigevent.html" title="Structure that describes an event"><span class="keyword dtype">sigevent</span>s</a>
    that weren't registered as secure events with
    <a class="xref" href="../m/msgregisterevent.html" title="Register a secure event"><span class="keyword apiname">MsgRegisterEvent()</span></a>.
    
    
    
    
    
  </li>


  </ul>


</dd>




<dt class="dt dlterm"><var class="keyword varname">bits</var></dt>

<dd class="dd">The new value of the flags.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">




The <span class="keyword apiname">ConnectFlags()</span> and <span class="keyword apiname">ConnectFlags_r()</span>
kernel calls modify or query the flags associated with the specified connection.
These kernel calls don't block.
</p>


<p class="p">
These functions are identical except in the way they indicate errors.
See the <a class="xref" href="#connectflags__Returns">Returns</a> section for details.
</p>


<p class="p">
You need to initialize the bits that correspond to the flag in both the
<var class="keyword varname">mask</var> and <var class="keyword varname">bits</var> arguments:
</p>


<ul class="ul">
<li class="li">If the bit in the <var class="keyword varname">mask</var> is 1, and the bit in the <var class="keyword varname">bits</var>
  is 1, the function turns the flag on.
</li>


<li class="li">If the bit in the <var class="keyword varname">mask</var> is 1, and the bit in the <var class="keyword varname">bits</var>
  is 0, the function turns the flag off.
</li>


<li class="li">If the bit in the <var class="keyword varname">mask</var> is 0, the function doesn't change the current value
  of the flag.
</li>


</ul>


<div class="note note"><span class="notetitle">Note:</span> 
<ul class="ul">
<li class="li">

In order to change the connection flags on a coid for another process with a different user ID,
your process must have the <span class="keyword const">PROCMGR_AID_CONNECTION</span> ability enabled.
</li>


<li class="li">In order to request information about another process,
  your process must have the <span class="keyword const">PROCMGR_AID_XPROCESS_QUERY</span> ability enabled.
  
</li>


</ul>

<p class="p">
For more information, see
<a class="xref" href="../p/procmgr_ability.html" title="Control a process's ability to perform certain operations"><span class="keyword apiname">procmgr_ability()</span></a>.
</p>

</div>

</div>



<div class="section" id="connectflags__Returns"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
The previous value of the flags associated with the connection.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
This value includes only the <span class="keyword const">_NTO_COF_*</span> bits listed above.
</div>


<p class="p">
If an error occurs:
</p>


<ul class="ul">
<li class="li"><span class="keyword apiname">ConnectFlags()</span> returns -1 and sets
  <a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a>.
</li>


<li class="li"><span class="keyword apiname">ConnectFlags_r()</span> returns the negative of a value from the Errors section
  and <strong class="ph b">doesn't</strong> set <var class="keyword varname">errno</var>.
</li>


</ul>


</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EBADF</span></dt>

<dd class="dd">The <var class="keyword varname">coid</var> isn't a valid connection ID for the process.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">The <var class="keyword varname">mask</var> includes invalid bits.</dd>




<dt class="dt dlterm"><span class="keyword const">EPERM</span></dt>

<dd class="dd">The calling process doesn't have the required permission; see
  <a class="xref" href="../p/procmgr_ability.html" title="Control a process's ability to perform certain operations"><span class="keyword apiname">procmgr_ability()</span></a>.
</dd>




<dt class="dt dlterm"><span class="keyword const">ESRCH</span></dt>

<dd class="dd">The process ID is invalid.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d1319154e500">Safety:</th>
<th class="entry" valign="top" id="d1319154e502">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">Cancellation point</td>
<td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">Signal handler</td>
<td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">Thread</td>
<td class="entry" valign="top" headers="d1319154e500 d1319154e502 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>


<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/connectattach.html" title="Establish a connection between a process and a channel">ConnectAttach(), ConnectAttach_r()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/connectserverinfo.html" title="Get information about a server connection">ConnectServerInfo(), ConnectServerInfo_r()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcntl.html" title="Provide control over an open file">fcntl()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open_ext.html" title="Open a path and set connection flags">open_ext()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/procmgr_ability.html" title="Control a process's ability to perform certain operations">procmgr_ability()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </div>
</body>
</html>