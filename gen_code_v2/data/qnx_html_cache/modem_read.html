
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="modem_read()" /><meta name="abstract" content="Read bytes from a file descriptor" /><meta name="description" content="Read bytes from a file descriptor" /><meta name="indexterms" content="modem_read()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/modem_open.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/modem_script.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/modem_write.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="modem_read" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>modem_read()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="modem_read">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M">M</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">modem_read()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Read bytes from a file descriptor</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/modem.h&gt;

int modem_read( int <var class="keyword varname">fd</var>,
                char *<var class="keyword varname">buf</var>,
                int <var class="keyword varname">bufsize</var>,
                int <var class="keyword varname">quiet</var>,
                int <var class="keyword varname">timeout</var>,
                int <var class="keyword varname">flags</var>,
                int (*<var class="keyword varname">cancel</var>)(void) );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">


<dt class="dt dlterm"><var class="keyword varname">fd</var></dt>

<dd class="dd">The file descriptor for the device that you want to read from; see
  <a class="xref" href="modem_open.html" title="Open a serial port"><span class="keyword apiname">modem_open()</span></a>.
</dd>




<dt class="dt dlterm"><var class="keyword varname">buf</var></dt>

<dd class="dd">A pointer to a buffer where the function can store the data.</dd>




<dt class="dt dlterm"><var class="keyword varname">bufsize</var></dt>

<dd class="dd">The size of the buffer, in bytes.</dd>




<dt class="dt dlterm"><var class="keyword varname">quiet</var></dt>

<dd class="dd">The maximum time to wait for more input after receiving at least one
  characters, in tenths of a second.
</dd>




<dt class="dt dlterm"><var class="keyword varname">timeout</var></dt>

<dd class="dd">The maximum time to wait for any input, in tenths of a second.</dd>




<dt class="dt dlterm"><var class="keyword varname">flags</var></dt>

<dd class="dd">Flags that you can use to filter and map received characters; any 
  combination of:

  <ul class="ul">
  <li class="li"><span class="keyword const">MODEM_ALLOWCASE</span> â preserve the case of incoming
    characters.
    Without this flag, all letters are mapped to lower case.
    
    
  </li>


  <li class="li"><span class="keyword const">MODEM_ALLOWCTRL</span> â allow control characters.
    Without this flag, control characters are discarded.
    
    
    
  </li>


  <li class="li"><span class="keyword const">MODEM_ALLOW8BIT</span> â preserve the top bit of incoming characters.
    Without this flag, the top bit is set to zero for all characters.
    
    
    
  </li>


  <li class="li"><span class="keyword const">MODEM_LASTLINE</span> â discard all previously received
    characters when a newline is received followed by more characters.
    If an automatic login script may be presented with an arbitrary text
    screen before the login prompt, you can use this flag to discard all
    but the login line, reducing the possibility of false matches.
    
    
  </li>


  </ul>


</dd>




<dt class="dt dlterm"><var class="keyword varname">cancel</var></dt>

<dd class="dd"><span class="keyword const">NULL</span>, or a callback that's called whenever the
  <var class="keyword varname">quiet</var> time period expires while waiting for more input.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>

<p class="p">Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">





The <span class="keyword apiname">modem_read()</span> function reads up to <var class="keyword varname">bufsize</var> bytes
from the device specified by the file descriptor, <var class="keyword varname">fd</var>,
and places them into the buffer pointed to by <var class="keyword varname">buf</var>.
</p>


<p class="p">
If no characters are received within the given <var class="keyword varname">timeout</var>,
<span class="keyword apiname">modem_read()</span> returns -1.
</p>


<p class="p">
When at least one character has been received, <span class="keyword apiname">modem_read()</span>
returns if the flow of incoming characters stops for at least the
<var class="keyword varname">quiet</var> time period.
If the buffer isn't large enough, <span class="keyword apiname">modem_read()</span> discards any incoming characters that
won't fit in it.
The function terminates the string in <var class="keyword varname">buf</var> with a null character.
</p>


<p class="p">
If you provide a <var class="keyword varname">cancel</var> function, it's called once each
<var class="keyword varname">quiet</var> time period while waiting for input. If this function
returns a nonzero value, <span class="keyword apiname">modem_read()</span> returns -1 immediately and
sets <var class="keyword varname">errno</var> to <span class="keyword const">ETIMEDOUT</span>.
You can use the <var class="keyword varname">cancel</var> function
as a callback in a graphical dialer that needs to support a cancel
button to stop a script (see
<a class="xref" href="modem_script.html" title="Run a script on a device"><span class="keyword apiname">modem_script()</span></a>).
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
Zero for success, or -1 on failure
(<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">


<dt class="dt dlterm"><span class="keyword const">EAGAIN</span></dt>

<dd class="dd">The <span class="keyword const">O_NONBLOCK</span> flag is set on this <var class="keyword varname">fd</var>,
      and the process would have been blocked in trying to perform this operation.
      
</dd>




<dt class="dt dlterm"><span class="keyword const">EBADF</span></dt>

<dd class="dd">The argument <var class="keyword varname">fd</var> is invalid, or the file isn't opened for reading.</dd>




<dt class="dt dlterm"><span class="keyword const">EINTR</span></dt>

<dd class="dd">The <span class="keyword apiname">readcond()</span> call was interrupted by the process being signalled.</dd>




<dt class="dt dlterm"><span class="keyword const">EIO</span></dt>

<dd class="dd">This process isn't currently able to read data from this <var class="keyword varname">fd</var>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">This function isn't supported for this <var class="keyword varname">fd</var>.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2210332e448">Safety:</th>
<th class="entry" valign="top" id="d2210332e450">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">Signal handler</td>
<td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">Read the <em class="ph i">Caveats</em></td>
</tr>

<tr><td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">Thread</td>
<td class="entry" valign="top" headers="d2210332e448 d2210332e450 ">Read the <em class="ph i">Caveats</em></td>
</tr>

</tbody>

</table>
</div>

</div>



<div class="section"><h2 class="title sectiontitle">Caveats:</h2>


<p class="p">
Depending on what you do in your <var class="keyword varname">cancel</var> function, <span class="keyword apiname">modem_read()</span>
may or not be signal handler or thread-safe.
</p>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/modem_open.html" title="Open a serial port">modem_open()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/modem_script.html" title="Run a script on a device">modem_script()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/modem_write.html" title="Write a string to a device">modem_write()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </div>
</body>
</html>