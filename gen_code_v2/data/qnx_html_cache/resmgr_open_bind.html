
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="resmgr_open_bind()" /><meta name="abstract" content="Associate an OCB with an open request" /><meta name="description" content="Associate an OCB with an open request" /><meta name="indexterms" content="resmgr_open_bind()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.resmgr/topic/about.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.getting_started/topic/s1_resmgr.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_attach.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_t.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_open_default.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_context_t.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_io_funcs_t.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_unbind.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="resmgr_open_bind" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>resmgr_open_bind()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="resmgr_open_bind">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R">R</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">R</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">resmgr_open_bind()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Associate an OCB with an open request</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/iofunc.h&gt;
#include &lt;sys/resmgr.h&gt;

int resmgr_open_bind(
       resmgr_context_t* <var class="keyword varname">ctp</var>,
       void* <var class="keyword varname">ocb</var>,
       const resmgr_io_funcs_t* <var class="keyword varname">iofuncs</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">ctp</var></dt>

<dd class="dd">A pointer to a
  <a class="xref" href="resmgr_context_t.html" title="Context information that's passed between resource-manager functions"><span class="keyword dtype">resmgr_context_t</span></a>
  structure that the resource-manager library uses to pass context information between functions.
</dd>




<dt class="dt dlterm"><var class="keyword varname">ocb</var></dt>

<dd class="dd">A pointer to the Open Control Block that you want to bind to the open request.
  An OCB is usually a structure of type
  <a class="xref" href="../i/iofunc_ocb_t.html" title="Open Control Block structure"><span class="keyword dtype">iofunc_ocb_t</span></a>.
</dd>




<dt class="dt dlterm"><var class="keyword varname">iofuncs</var></dt>

<dd class="dd">A pointer to the
  <a class="xref" href="resmgr_io_funcs_t.html" title="Table of POSIX-level I/O functions"><span class="keyword dtype">resmgr_io_funcs_t</span></a>
  structure that defines the I/O functions for the resource manager.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">



The <span class="keyword apiname">resmgr_open_bind()</span> function is the lowest-level call in the resource
manager library used for handling open messages.
It associates the Open Control Block (<dfn class="term">OCB</dfn>) with a process identified by the <var class="keyword varname">id</var>
and <var class="keyword varname">info</var> members of <var class="keyword varname">ctp</var>.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
You must use this function as part of the handling of an <span class="keyword const">_IO_OPEN</span> message.
In practice, you don't call this function directly; you typically use either
<a class="xref" href="../i/iofunc_open_default.html" title="Default handler for _IO_CONNECT messages"><span class="keyword apiname">iofunc_open_default()</span></a>
or
<a class="xref" href="../i/iofunc_ocb_attach.html" title="Initialize an Open Control Block"><span class="keyword apiname">iofunc_ocb_attach()</span></a>.
(The <span class="keyword apiname">iofunc_open_default()</span> function calls <span class="keyword apiname">iofunc_ocb_attach()</span>,
which in turn calls <span class="keyword apiname">resmgr_open_bind()</span>).
</div>


<p class="p">
An internal data structure is allocated that maintains the
number of links to the OCB. On a file descriptor <span class="keyword apiname">dup()</span>,
the link count is incremented and on a <span class="keyword apiname">close()</span> it's
decremented. When the count reaches zero, the
<span class="keyword apiname">close_ocb()</span> callout specified in <var class="keyword varname">io_funcs</var> is called.
</p>


<p class="p">
The OCB is a structure that contains
at least the members as defined by the typedef
<a class="xref" href="../i/iofunc_ocb_t.html" title="Open Control Block structure"><span class="keyword dtype">iofunc_ocb_t</span></a>.
This typedef defines a common OCB structure that can then be used by the POSIX
layer helper functions (all functions beginning with the name <var class="keyword varname">iofunc_*</var>).
You can extend it if you need to store additional information; see the
<span class="q">&#147;<a class="xref" href="../../../com.qnx.doc.neutrino.resmgr/topic/structures.html">POSIX-Layer Data Structures</a>&#148;</span>
chapter of <cite class="cite">Writing a Resource Manager</cite>.
</p>


<p class="p">

The <var class="keyword varname">attr</var> argument to the <span class="keyword apiname">open()</span> callout
is also typically saved in the OCB.  The <span class="keyword dtype">iofunc_ocb_t</span> structure
has a member called <var class="keyword varname">attr</var> where you must store the value of
the <var class="keyword varname">attr</var> argument.
This lets the POSIX helper functions access information about the current
open session (as stored in the OCB) as well as information about the
device itself (as stored in the attributes structure, <var class="keyword varname">ocb-&gt;attr</var>).
</p>


<p class="p">
For a detailed discussion, including several examples, see
<a class="xref" href="../../../com.qnx.doc.neutrino.resmgr/topic/about.html"><em class="ph i">Writing a Resource Manager</em></a>.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<dl class="dl" compact="compact">


<dt class="dt dlterm">0
  </dt>


<dd class="dd">Success.

  </dd>




<dt class="dt dlterm">-1
  </dt>


<dd class="dd">An error occurred (<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">


<dt class="dt dlterm"><span class="keyword const">EINVAL</span>	
  </dt>


<dd class="dd">The <var class="keyword varname">info</var> member of <var class="keyword varname">ctp</var> isn't valid. </dd>




  <dt class="dt dlterm"><span class="keyword const">ENOENT</span>	
  </dt>


  <dd class="dd">The <var class="keyword varname">id</var> member of <var class="keyword varname">ctp</var> isn't valid. </dd>




<dt class="dt dlterm"><span class="keyword const">ENOMEM</span>	
  </dt>


<dd class="dd">Insufficient memory to allocate an internal data structure.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2525717e378">Safety:</th>
<th class="entry" valign="top" id="d2525717e380">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">Signal handler</td>
<td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">Thread</td>
<td class="entry" valign="top" headers="d2525717e378 d2525717e380 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>


<div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.resmgr/topic/about.html" title="Writing a Resource Manager">Writing a Resource Manager</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.getting_started/topic/s1_resmgr.html" title="Resource Managers (Getting Started with QNX Neutrino)">Resource Managers (Getting Started with <span class="keyword">QNX Neutrino</span>)</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_attach.html" title="Initialize an Open Control Block">iofunc_ocb_attach()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_ocb_t.html" title="Open Control Block structure">iofunc_ocb_t</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_open_default.html" title="Default handler for _IO_CONNECT messages">iofunc_open_default()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_context_t.html" title="Context information that's passed between resource-manager functions">resmgr_context_t</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_io_funcs_t.html" title="Table of POSIX-level I/O functions">resmgr_io_funcs_t</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/resmgr_unbind.html" title="Disassociate an OCB from an open request">resmgr_unbind()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">R</span></a></span>  </div>
</body>
</html>