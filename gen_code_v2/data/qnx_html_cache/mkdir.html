
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="mkdir()" /><meta name="abstract" content="Create a directory" /><meta name="description" content="Create a directory" /><meta name="indexterms" content="mkdir()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mkdirat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/u/umask.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="mkdir" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>mkdir()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="mkdir">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M">M</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">mkdir()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Create a directory</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;

int mkdir( const char* <var class="keyword varname">path</var>,
           mode_t <var class="keyword varname">mode</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">path</var></dt>

<dd class="dd">The name of the directory that you want to create.</dd>




<dt class="dt dlterm"><var class="keyword varname">mode</var></dt>

<dd class="dd">The permissions for the directory, modified by the process's 
  file-creation mask (see
  <a class="xref" href="../u/umask.html" title="Set the file-mode creation mask for the process"><span class="keyword apiname">umask()</span></a>).

  <p class="p">
  The access permissions for the file or directory are specified as a
  combination of bits defined in the <span class="ph filepath">&lt;sys/stat.h&gt;</span> header file.
  For more information, see the entry for
  <a class="xref" href="../s/stat_struct.html" title="Data structure for information about a file or directory"><span class="keyword dtype">struct stat</span></a>.
  </p>

</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">


The <span class="keyword apiname">mkdir()</span> function creates a new directory named
<var class="keyword varname">path</var>. The <var class="keyword varname">path</var> value can be relative to the current
working directory or it can be an absolute path name.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
Not all filesystems support the creation of directories.
For example, <span class="ph filepath">/dev/shmem</span> (which really isn't a filesystem
but looks like one) doesn't.
For more information, see the
<a class="xref" href="../../../com.qnx.doc.neutrino.user_guide/topic/fsystems.html">Working with Filesystems</a>
chapter of the <span class="keyword">QNX Neutrino</span> <cite class="cite">User's Guide</cite>.
</div>


<p class="p">
The newly created directory is empty.
</p>


<p class="p">
The directory's owner ID is set to the process's effective user ID.
The directory's group ID is set to the group ID of the parent directory 
(if the parent set-group ID bit is set) or to the process's effective group ID.
</p>


<div class="p">
The file permission bits of the directory are set based on the settings in <var class="keyword varname">mode</var>.
The following bits, in addition to file permission bits, behave as follows:
<dl class="dl">


<dt class="dt dlterm"><span class="keyword const">S_ISGID</span></dt>

<dd class="dd">Files and directories created within this directory have the group
  ID of this directory instead of the group ID of the process creating
  the file or directory.
  
</dd>




<dt class="dt dlterm"><span class="keyword const">S_ISVTX</span></dt>

<dd class="dd">Files can be removed or renamed only if one or more of the following is true:
  

  <ul class="ul">
  <li class="li">The user owns the file.</li>

  <li class="li">The user owns the directory.</li>

  <li class="li">The file is writable by the user.</li>

  <li class="li">The user is privileged.</li>

  </ul>

</dd>



</dl>

</div>


<p class="p">



The <span class="keyword apiname">mkdir()</span> function
marks the <var class="keyword varname">st_atime</var>, <var class="keyword varname">st_ctime</var>, and
<var class="keyword varname">st_mtime</var> fields of the directory for update.
The <var class="keyword varname">st_ctime</var> and <var class="keyword varname">st_mtime</var> fields of the parent directory
are also updated.
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<dl class="dl" compact="compact">


<dt class="dt dlterm">0</dt>

<dd class="dd">Success.</dd>




<dt class="dt dlterm">-1</dt>

<dd class="dd">An error occurred (<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set).</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">


<dt class="dt dlterm"><span class="keyword const">EACCES</span></dt>

<dd class="dd">Search permission is denied for a component of <var class="keyword varname">path</var>,
  or write permission is denied on the parent directory of <var class="keyword varname">path</var>.
</dd>




<dt class="dt dlterm"><span class="keyword const">EEXIST</span></dt>

<dd class="dd">The directory named by <var class="keyword varname">path</var> already exists.</dd>




<dt class="dt dlterm"><span class="keyword const">ELOOP</span></dt>

<dd class="dd">There are too many levels of symbolic links.</dd>




<dt class="dt dlterm"><span class="keyword const">EMLINK</span></dt>

<dd class="dd">The link count of the parent directory would exceed <span class="keyword const">LINK_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENAMETOOLONG</span></dt>

<dd class="dd">The length of <var class="keyword varname">path</var> exceeds <span class="keyword const">PATH_MAX</span>.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOENT</span></dt>

<dd class="dd">A pathname component in the specified <var class="keyword varname">path</var> doesn't
  exist, or <var class="keyword varname">path</var> is an empty string.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSPC</span></dt>

<dd class="dd">
The filesystem doesn't contain enough space to hold the contents of
the new directory or to extend the parent directory,
or the maximum limit of files and directories has been reached.
</dd>




<dt class="dt dlterm"><span class="keyword const">ENOSYS</span></dt>

<dd class="dd">This function isn't supported for this path.</dd>




<dt class="dt dlterm"><span class="keyword const">ENOTDIR</span></dt>

<dd class="dd">A component of <var class="keyword varname">path</var> isn't a directory.</dd>




<dt class="dt dlterm"><span class="keyword const">EROFS</span></dt>

<dd class="dd">The parent directory resides on a read-only filesystem.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<p class="p">
To make a new directory called
<span class="ph filepath">/src</span> in <span class="ph filepath">/hd</span>:
</p>


<pre class="pre codeblock">
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;stdlib.h&gt;

int main( void )
{
    (void)mkdir( "/hd/src",
                 S_IRWXU |
                 S_IRGRP | S_IXGRP |
                 S_IROTH | S_IXOTH );

    return EXIT_SUCCESS;
}
</pre>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2193103e447">Safety:</th>
<th class="entry" valign="top" id="d2193103e449">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">Signal handler</td>
<td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">Thread</td>
<td class="entry" valign="top" headers="d2193103e447 d2193103e449 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/e/errno.html" title="Thread-local error variable">errno</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/m/mkdirat.html" title="Create a directory at a given location">mkdirat()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" title="Get information about a file or directory, given a path">stat(), stat64()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/u/umask.html" title="Set the file-mode creation mask for the process">umask()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-m.html" title="M"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">M</span></a></span>  </div>
</body>
</html>