
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="rsrcdbmgr_devno_attach()" /><meta name="abstract" content="Get major and minor device numbers" /><meta name="description" content="Get major and minor device numbers" /><meta name="indexterms" content="rsrcdbmgr_devno_attach()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_attr_t.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/procmgr_ability.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/rsrcdbmgr_attach.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/r/rsrcdbmgr_devno_detach.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="rsrcdbmgr_devno_attach" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>rsrcdbmgr_devno_attach()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="rsrcdbmgr_devno_attach">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R">R</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">R</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">rsrcdbmgr_devno_attach()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>




<div class="body refbody"><p class="shortdesc"><em class="ph i">Get major and minor device numbers</em></p>


<div class="section">

<p class="p">





</p>

</div>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;sys/rsrcdbmgr.h&gt;

dev_t rsrcdbmgr_devno_attach( const char * <var class="keyword varname">name</var>,
                              int <var class="keyword varname">minor_request</var>,
                              int <var class="keyword varname">flags</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">name</var></dt>

<dd class="dd">The name of the class of devices that you want to get the major number for.
  This string can be anything, but can't include any slashes.
  Various names are defined in
  in <span class="ph filepath">&lt;sys/ftype.h&gt;</span>; see
  <span class="q">&#147;<a class="xref" href="#rsrcdbmgr_devno_attach__Classes">Class names</a>,&#148;</span>
  below.
</dd>




<dt class="dt dlterm"><var class="keyword varname">minor_request</var></dt>

<dd class="dd">The minor device number that you want to reserve, or -1 to let the system
  assign the next available minor number.
</dd>




<dt class="dt dlterm"><var class="keyword varname">flags</var></dt>

<dd class="dd">Presently, there are no flags; pass zero for this argument.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">
The <span class="keyword apiname">rsrcdbmgr_devno_attach()</span> function reserves a device number that consists of:
</p>


<ul class="ul">
<li class="li">a major number that corresponds to the given device class.
  If there isn't already a major number associated with the class, a new major number is assigned to it.
</li>


<li class="li">a minor number that's based on <var class="keyword varname">minor_request</var>.
  If <var class="keyword varname">minor_request</var> is -1,
  the function returns the first free minor number in the specified class.
</li>


</ul>


<p class="p">

There's a maximum of 64 major numbers (0 through 63) on the system, and a
maximum of 1024 minor numbers (0 through 1023) per major number.
</p>


<p class="p">
Major and minor numbers are used only by resource managers and are
exposed through the <var class="keyword varname">rdev</var> member of the
<a class="xref" href="../i/iofunc_attr_t.html" title="I/O attribute structure"><span class="keyword dtype">iofunc_attr_t</span></a>
structure, and correspondingly the <var class="keyword varname">st_rdev</var> member of the
<span class="keyword dtype">stat</span> structure.
They aren't required for proper operation; on simple devices, an entry will be simulated for you. 
</p>


<div class="note note"><span class="notetitle">Note:</span> 
In order to successfully use the <span class="keyword apiname">rsrcdbmgr_*()</span> functions to modify
the resource database, your process must have the <span class="keyword const">PROCMGR_AID_RSRCDBMGR</span> ability enabled.
For more information, see
<a class="xref" href="../p/procmgr_ability.html" title="Control a process's ability to perform certain operations"><span class="keyword apiname">procmgr_ability()</span></a>.

</div>


<p class="p">
If the requested device number is already in use (whether by the calling process or a different process),
this function returns -1 and sets
<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a>
to <span class="keyword const">EINVAL</span>.
</p>


<p class="p">
To detach a device, call
<a class="xref" href="rsrcdbmgr_devno_detach.html" title="Detach a major and minor number"><span class="keyword apiname">rsrcdbmgr_devno_detach()</span></a>.
If you don't detach a device, it's released when the process that attached it terminates.
</p>


<p class="p" id="rsrcdbmgr_devno_attach__Classes"><strong class="ph b">Class names</strong></p>


<p class="p">
As mentioned above, the name of the class of devices can be anything, but can't include any slashes.
The following class names are defined in <span class="ph filepath">&lt;sys/ftype.h&gt;</span>:






</p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">

<thead class="thead" align="left">
<tr>
  <th class="entry" valign="top" id="d2535797e279">Constant</th>

  <th class="entry" valign="top" id="d2535797e282">Value</th>

  <th class="entry" valign="top" id="d2535797e285">Class</th>

</tr>

</thead>


<tbody class="tbody">
<tr>
  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><span class="keyword const">_MAJOR_PATHMGR</span></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><samp class="ph codeph">"pathmgr"</samp></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 ">Used only by the path manager</td>

</tr>


<tr>
  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><span class="keyword const">_MAJOR_DEV</span></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><samp class="ph codeph">"dev"</samp></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 ">Devices in <span class="ph filepath">/dev</span> with only one instance (e.g., <span class="ph filepath">/dev/tty</span>)</td>

</tr>


<tr>
  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><span class="keyword const">_MAJOR_BLK_PREFIX</span></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><samp class="ph codeph">"blk-"</samp></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 ">All block devices (e.g., <span class="ph filepath">/dev/hd[0-9]*</span> would be <samp class="ph codeph">"blk-hd"</samp>)</td>

</tr>


<tr>
  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><span class="keyword const">_MAJOR_CHAR_PREFIX</span></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><samp class="ph codeph">"char-"</samp></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 ">All character devices (e.g., <span class="ph filepath">/dev/ser[0-9]*</span> would be <samp class="ph codeph">"char-ser"</samp>)</td>

</tr>


<tr>
  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><span class="keyword const">_MAJOR_FSYS</span></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 "><samp class="ph codeph">"fsys"</samp></td>

  <td class="entry" valign="top" headers="d2535797e279 d2535797e282 d2535797e285 ">All filesystems</td>

</tr>


</tbody>

</table>
</div>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
         A <span class="keyword dtype">dev_t</span> object that contains the
        major and minor numbers, or (<span class="keyword dtype">dev_t</span>)-1 if an error occurs (<a class="xref" href="../e/errno.html" title="Thread-local error variable"><var class="keyword varname">errno</var></a> is set). </p>


<p class="p">
You can extract the major and minor number values
from the <span class="keyword dtype">dev_t</span> object by using the <span class="keyword apiname">major()</span>
and <span class="keyword apiname">minor()</span> macros defined in <span class="ph filepath">&lt;sys/types.h&gt;</span>.
For more information, see the documentation for
<a class="xref" href="../s/stat.html" title="Get information about a file or directory, given a path"><span class="keyword apiname">stat()</span></a>.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Errors:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EINTR</span></dt>

<dd class="dd">The call was interrupted by a signal.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">One of the following occurred:

  <ul class="ul">
  <li class="li">The requested name and number are already in use.</li>

  <li class="li">An argument was invalid.</li>

  </ul>

</dd>




<dt class="dt dlterm"><span class="keyword const">ENOMEM</span></dt>

<dd class="dd">Insufficient memory to allocate internal data structures.</dd>




<dt class="dt dlterm"><span class="keyword const">EPERM</span></dt>

<dd class="dd">The calling process doesn't have the required permission; see
  <a class="xref" href="../p/procmgr_ability.html" title="Control a process's ability to perform certain operations"><span class="keyword apiname">procmgr_ability()</span></a>.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Examples:</h2>


<pre class="pre codeblock">
#include &lt;sys/rsrcdbmgr.h&gt;

char      *dev_name;
int       myminor_request, flags=0;
dev_t     major_minor;

major_minor = rsrcdbmgr_devno_attach
              ( dev_name, myminor_request, flags );

â¦

rsrcdbmgr_devno_detach( major_minor, flags );
</pre>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2535797e530">Safety:</th>
<th class="entry" valign="top" id="d2535797e532">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">Signal handler</td>
<td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">Thread</td>
<td class="entry" valign="top" headers="d2535797e530 d2535797e532 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>



</div>


<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/i/iofunc_attr_t.html" title="I/O attribute structure">iofunc_attr_t</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/procmgr_ability.html" title="Control a process's ability to perform certain operations">procmgr_ability()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/rsrcdbmgr_attach.html" title="Reserve a system resource for a process">rsrcdbmgr_attach()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/r/rsrcdbmgr_devno_detach.html" title="Detach a major and minor number">rsrcdbmgr_devno_detach()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/s/stat.html" title="Get information about a file or directory, given a path">stat(), stat64()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-r.html" title="R"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">R</span></a></span>  </div>
</body>
</html>