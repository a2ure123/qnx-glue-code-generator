
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="cfgopen()" /><meta name="abstract" content="Open a configuration file" /><meta name="description" content="Open a configuration file" /><meta name="indexterms" content="cfgopen()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/c/confstr.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcfgopen.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="cfgopen" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>cfgopen()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="cfgopen">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C">C</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">cfgopen()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>



<div class="body refbody"><p class="shortdesc"><em class="ph i">Open a configuration file</em></p>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;cfgopen.h&gt;

int cfgopen( const char * <var class="keyword varname">path</var>,
             unsigned <var class="keyword varname">flags</var>,
             const char * <var class="keyword varname">historical</var>,
             char * <var class="keyword varname">namebuf</var>,
             size_t <var class="keyword varname">nblen</var> );
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">path</var></dt>

<dd class="dd">The name of the configuration file that you want to open.</dd>




<dt class="dt dlterm"><var class="keyword varname">flags</var></dt>

<dd class="dd">Flags that control the opening; see below.</dd>




<dt class="dt dlterm"><var class="keyword varname">historical</var></dt>

<dd class="dd">A optional file to open as a last resort if none of the criteria for finding the path is met.
  This string works like a path search order, and lets you search more than one location.
  You can also specify <samp class="ph codeph">%H</samp> to substitute the hostname value into the string.
  Specify <span class="keyword const">NULL</span> to ignore this option.
</dd>




<dt class="dt dlterm"><var class="keyword varname">namebuf</var></dt>

<dd class="dd">A buffer to save the pathname in.
  Specify <span class="keyword const">NULL</span> to ignore this option.
</dd>




<dt class="dt dlterm"><var class="keyword varname">nblen</var></dt>

<dd class="dd">The length of the buffer pointed to by <var class="keyword varname">namebuf</var>.
  Specify 0 to ignore this option.
</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">


The <span class="keyword apiname">cfgopen()</span> function opens the configuration file named by <var class="keyword varname">path</var>.
This function is a cover function for 
<a class="xref" href="../o/open.html" title="Open a file"><span class="keyword apiname">open()</span></a>
that searches several default system locations for your files, based on
specified characteristics.


</p>


<p class="p">
The value of <var class="keyword varname">flags</var> correspond to, and have similar limitations of, 
the standard <span class="keyword apiname">open()</span> flags.
The <var class="keyword varname">flags</var> value is constructed by the bitwise ORing of values from the following list, 
defined in the <span class="ph filepath">&lt;cfgopen.h&gt;</span> header file. 
Applications must specify exactly one of these file-access modes in the value of <var class="keyword varname">flag</var>:
</p>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">CFGFILE_RDONLY</span></dt>

<dd class="dd">Open for reading only.
  
</dd>




<dt class="dt dlterm"><span class="keyword const">CFGFILE_RDWR</span></dt>

<dd class="dd">Open for reading and writing.
  
</dd>




<dt class="dt dlterm"><span class="keyword const">CFGFILE_WRONLY</span></dt>

<dd class="dd">Open for writing only.
  
</dd>



</dl>


<p class="p">
You can also include any combination of these bits in the value of <var class="keyword varname">flag</var>:
</p>


<dl class="dl">

<dt class="dt dlterm"><span class="keyword const">CFGFILE_APPEND</span></dt>

<dd class="dd">If set, the file offset is set to the end of the file prior to each write.
  
</dd>




<dt class="dt dlterm"><span class="keyword const">CFGFILE_CREAT</span></dt>

<dd class="dd">If the file doesn't exist, it's created with mode 0644,
  the file's user ID is set to the effective user ID of the process,
  and the group ID is set to the effective group ID of the process 
  or the group ID of the file's parent directory 
  (see <a class="xref" href="chmod.html" title="Change the permissions for a file"><span class="keyword apiname">chmod()</span></a>).
  
</dd>




<dt class="dt dlterm"><span class="keyword const">CFGFILE_EXCL</span></dt>

<dd class="dd">If <span class="keyword const">CFGFILE_EXCL</span> and <span class="keyword const">CFGFILE_CREAT</span> are set,
  and the file exists, <span class="keyword apiname">cfgopen()</span> fails. 
  The check for the existence of the file and the creation of the file if it doesn't
  exist is atomic with respect to other processes attempting the same
  operation with the same filename. Specifying <span class="keyword const">CFGFILE_EXCL</span>
  without <span class="keyword const">CFGFILE_CREAT</span> has no effect.
  
</dd>




<dt class="dt dlterm"><span class="keyword const">CFGFILE_TRUNC</span></dt>

<dd class="dd">If the file exists and is a regular file, and the file is successfully
  opened <span class="keyword const">CFGFILE_WRONLY</span> or <span class="keyword const">CFGFILE_RDWR</span>,
  the file length is truncated to zero and the mode and owner are left
  unchanged. <span class="keyword const">CFGFILE_TRUNC</span> has no effect on FIFO or block or
  character special files or directories. Using <span class="keyword const">CFGFILE_TRUNC</span>
  with <span class="keyword const">CFGFILE_RDONLY</span> has no effect.
  
</dd>



</dl>


<p class="p" id="cfgopen__SearchConditionFlags"><strong class="ph b">Search condition flags</strong></p>


<p class="p">
In order to hint to the function where it should access or construct (in the case of <span class="keyword const">CFGFILE_CREAT</span>)
<var class="keyword varname">path</var>,
there are several bits that you can specify and OR into <var class="keyword varname">flags</var>. 
When specified, the bits are accessed using the following search order:
</p>


<ol class="ol">
<li class="li"><span class="keyword const">CFGFILE_USER_NODE</span>

  <p class="p">
  <span class="ph filepath"><span class="keyword envar">$HOME</span>/.cfg/</span><var class="keyword varname">node_name</var><span class="ph filepath">/</span><var class="keyword varname">path</var>
  </p>

</li>


<li class="li"><span class="keyword const">CFGFILE_USER</span>

  <p class="p">
  <span class="ph filepath"><span class="keyword envar">$HOME</span>/.cfg/</span><var class="keyword varname">path</var>
  </p>

</li>


<li class="li"><span class="keyword const">CFGFILE_NODE</span>

  <p class="p">
  <span class="ph filepath">/etc/host_cfg/</span><var class="keyword varname">node_name</var><span class="ph filepath">/</span><var class="keyword varname">path</var>
  </p>

</li>


<li class="li"><span class="keyword const">CFGFILE_GLOBAL</span>

  <p class="p">
  <var class="keyword varname">path</var>
  </p>

</li>


</ol>


<p class="p">
where <var class="keyword varname">node_name</var> is the value you get by calling
<a class="xref" href="confstr.html" title="Get configuration-defined string values"><span class="keyword apiname">confstr()</span></a>
for <span class="keyword const">CS_HOSTNAME</span>.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
If the directory <span class="ph filepath">/etc/host_cfg</span> doesn't exist on the system,
the following <var class="keyword varname">flags</var> are transformed automatically:

<ul class="ul">
<li class="li"><span class="keyword const">CFGFILE_USER_NODE</span> becomes <span class="keyword const">CFGFILE_USER</span></li>

<li class="li"><span class="keyword const">CFGFILE_NODE</span> becomes <span class="keyword const">CFGFILE_GLOBAL</span></li>

</ul>

</div>


<p class="p">
When creating a file or opening a file for writing, you can specify only one of the above location flags.
Set <span class="keyword const">CFGFILE_NOFD</span> when you need only the pathname, not the file descriptor.
If a directory path doesn't exist when a file is opened for creation,
<span class="keyword apiname">cfgopen()</span> attempts to create the path.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<p class="p">
A valid file descriptor if <span class="keyword const">CFGFILE_NOFD</span> isn't specified,
a nonnegative value if <span class="keyword const">CFGFILE_NOFD</span> is specified,
or -1 if an error occurs.
</p>

</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">QNX Neutrino</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d1282183e509">Safety:</th>
<th class="entry" valign="top" id="d1282183e511">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">Cancellation point</td>
<td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">Signal handler</td>
<td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">Thread</td>
<td class="entry" valign="top" headers="d1282183e509 d1282183e511 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>


<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/c/confstr.html" title="Get configuration-defined string values">confstr()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/f/fcfgopen.html" title="Open a configuration file">fcfgopen()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/o/open.html" title="Open a file">open(), open64()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-c.html" title="C"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C</span></a></span>  </div>
</body>
</html>