
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="reference" /><meta name="DC.Title" content="pthread_mutex_consistent()" /><meta name="abstract" content="Mark as consistent the state that's protected by a mutex" /><meta name="description" content="Mark as consistent the state that's protected by a mutex" /><meta name="indexterms" content="pthread_mutex_consistent()" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_getrobust.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_init.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_setrobust.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_settype.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_lock.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_timedlock.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_trylock.html" /><meta name="DC.Relation" scheme="URI" content="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_unlock.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="pthread_mutex_consistent" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>pthread_mutex_consistent()</title><link rel="canonical" type="html" href="https://www.qnx.com/developers/docs/7.1/#com.qnx.doc.neutrino.lib_ref/" /><!--  Generated with Oxygen version 18.1, build number 2017020917.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../../../index.html";
            
            --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><script type="text/javascript"> var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-27400275-1']); _gaq.push(['_setDomainName', 'www.qnx.com']);_gaq.push(['_setAllowLinker', true]);_gaq.push(['_trackPageview']);(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="pthread_mutex_consistent">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P">P</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">P</span></a></span>  </span></td></tr></tbody></table>


<h1 class="title topictitle1"><span class="keyword apiname">pthread_mutex_consistent()</span></h1>
<table width="100%"><tbody><tr><td align="left"><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">QNX SDP</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">7.1</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">C Library Reference</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">API</button><button style="margin:3px 5px; background-color:default; border:default; pointer-events: none; font-size:0.9em;">Developer</button></td><td align="right"><span style="margin:0px 5px; font-size:0.9em;">Updated: October 28, 2024</span></td></tr></tbody></table>


<div class="body refbody"><p class="shortdesc"><em class="ph i">Mark as consistent the state that's protected by a mutex</em></p>


<div class="section">

<p class="p">




</p>

</div>


<div class="section refsyn"><h2 class="title sectiontitle">Synopsis:</h2>

<pre class="pre codeblock">
#include &lt;stdlib.h&gt;

int pthread_mutex_consistent( pthread_mutex_t *<var class="keyword varname">mutex</var>);
</pre>

</div>



<div class="section"><h2 class="title sectiontitle">Arguments:</h2>


<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">mutex</var></dt>

<dd class="dd">A pointer to the <span class="keyword dtype">pthread_mutex_t</span> object for a robust mutex.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Library:</h2>


<p class="p"><span class="ph filepath">libc</span></p>


<p class="p">
Use the <span class="keyword option">-l c</span> option to
<a class="xref" href="../../../com.qnx.doc.neutrino.utilities/topic/q/qcc.html"><span class="keyword cmdname">qcc</span></a>
to link against this library.
This library is usually included automatically.
</p>


</div>



<div class="section"><h2 class="title sectiontitle">Description:</h2>


<p class="p">
If <var class="keyword varname">mutex</var> is a robust mutex in an inconsistent state, you can use
<span class="keyword apiname">pthread_mutex_consistent()</span> to mark the state protected by the mutex as consistent again.
The behavior is undefined if the value specified by <var class="keyword varname">mutex</var> argument doesn't refer to
an initialized mutex.
</p>


<p class="p">
If an owner of a robust mutex terminates while holding the mutex, the mutex becomes inconsistent,
and the next thread that acquires the mutex lock is notified of the state by a return value
<span class="keyword const">EOWNERDEAD</span> from
<a class="xref" href="pthread_mutex_lock.html" title="Lock a mutex"><span class="keyword apiname">pthread_mutex_lock()</span></a>,
<a class="xref" href="pthread_mutex_timedlock.html" title="Lock a mutex, with a time limit"><span class="keyword apiname">pthread_mutex_timedlock()</span></a>,
or
<a class="xref" href="pthread_mutex_trylock.html" title="Attempt to lock a mutex"><span class="keyword apiname">pthread_mutex_trylock()</span></a>,
In this case, the mutex doesn't become normally usable again until the state is marked as consistent.
</p>


<p class="p">
If the thread that acquired the mutex lock with the return value <span class="keyword const">EOWNERDEAD</span> terminates
before calling either <span class="keyword apiname">pthread_mutex_consistent()</span> or
<a class="xref" href="pthread_mutex_unlock.html" title="Unlock a mutex"><span class="keyword apiname">pthread_mutex_unlock()</span></a>,
the next thread that acquires the mutex lock is notified about the state of the mutex by the return value
<span class="keyword const">EOWNERDEAD</span>.
</p>


<div class="note note"><span class="notetitle">Note:</span> 
The <span class="keyword apiname">pthread_mutex_consistent()</span> function is responsible only for notifying the implementation
that the state protected by the mutex has been recovered and that normal operations with the mutex can be resumed.
It's the responsibility of the application to recover the state so it can be reused.
If the application can't perform the recovery, it can notify the implementation that the situation is unrecoverable
by a call to <span class="keyword apiname">pthread_mutex_unlock()</span> without a prior call to
<span class="keyword apiname">pthread_mutex_consistent()</span>, in which case subsequent threads that attempt to lock the mutex
will fail to acquire the lock and be returned <span class="keyword const">ENOTRECOVERABLE</span>.
</div>


</div>



<div class="section"><h2 class="title sectiontitle">Returns:</h2>


<dl class="dl" compact="compact">

<dt class="dt dlterm"><span class="keyword const">EOK</span></dt>

<dd class="dd">Success.</dd>




<dt class="dt dlterm"><span class="keyword const">EINVAL</span></dt>

<dd class="dd">The mutex isn't robust, or it doesn't protect an inconsistent state.</dd>



</dl>


</div>



<div class="section"><h2 class="title sectiontitle">Classification:</h2>

<p class="p"><a class="xref" href="../summary.html#summary__CLASSIFICATION">POSIX 1003.1</a></p>



<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
<thead class="thead" align="left">
<tr><th class="entry" valign="top" id="d2418068e231">Safety:</th>
<th class="entry" valign="top" id="d2418068e233">Â </th>
</tr>

</thead>

<tbody class="tbody">
<tr><td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">Cancellation point</td>
<td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">Interrupt handler</td>
<td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">No</td>
</tr>

<tr><td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">Signal handler</td>
<td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">Yes</td>
</tr>

<tr><td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">Thread</td>
<td class="entry" valign="top" headers="d2418068e231 d2418068e233 ">Yes</td>
</tr>

</tbody>

</table>
</div>

</div>


</div>





<div class="related-links"><div class="relinfo relref"><strong>Related reference</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_getrobust.html" title="Get the robust attribute from a mutex attribute object">pthread_mutexattr_getrobust()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_init.html" title="Initialize a mutex attribute object">pthread_mutexattr_init()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_setrobust.html" title="Set the robust attribute in a mutex attribute object">pthread_mutexattr_setrobust()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutexattr_settype.html" title="Set a mutex type">pthread_mutexattr_settype()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_lock.html" title="Lock a mutex">pthread_mutex_lock()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_timedlock.html" title="Lock a mutex, with a time limit">pthread_mutex_timedlock(), pthread_mutex_timedlock_monotonic()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_trylock.html" title="Attempt to lock a mutex">pthread_mutex_trylock()</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../../../com.qnx.doc.neutrino.lib_ref/topic/p/pthread_mutex_unlock.html" title="Unlock a mutex">pthread_mutex_unlock()</a></div>
</div>
</div><div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../com.qnx.doc.neutrino.lib_ref/topic/lib-p.html" title="P"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">P</span></a></span>  </div>
</body>
</html>